const hi=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}};hi();function Z(){}const vi=t=>t;function Ge(t,e){for(const r in e)t[r]=e[r];return t}function ga(t){return t()}function En(){return Object.create(null)}function me(t){t.forEach(ga)}function da(t){return typeof t=="function"}function ve(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Lt;function nr(t,e){return Lt||(Lt=document.createElement("a")),Lt.href=e,t===Lt.href}function xi(t){return Object.keys(t).length===0}function wr(t,...e){if(t==null)return Z;const r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function ar(t,e,r,n){if(t){const a=fa(t,e,r,n);return t[0](a)}}function fa(t,e,r,n){return t[1]&&n?Ge(r.ctx.slice(),t[1](n(e))):r.ctx}function ir(t,e,r,n){if(t[2]&&n){const a=t[2](n(r));if(e.dirty===void 0)return a;if(typeof a=="object"){const i=[],l=Math.max(e.dirty.length,a.length);for(let o=0;o<l;o+=1)i[o]=e.dirty[o]|a[o];return i}return e.dirty|a}return e.dirty}function lr(t,e,r,n,a,i){if(a){const l=fa(e,r,n,i);t.p(l,a)}}function or(t){if(t.ctx.length>32){const e=[],r=t.ctx.length/32;for(let n=0;n<r;n++)e[n]=-1;return e}return-1}function pa(t){const e={};for(const r in t)r[0]!=="$"&&(e[r]=t[r]);return e}function sr(t,e){const r={};e=new Set(e);for(const n in t)!e.has(n)&&n[0]!=="$"&&(r[n]=t[n]);return r}function yi(t){const e={};for(const r in t)e[r]=!0;return e}const ha=typeof window!="undefined";let bi=ha?()=>window.performance.now():()=>Date.now(),on=ha?t=>requestAnimationFrame(t):Z;const it=new Set;function va(t){it.forEach(e=>{e.c(t)||(it.delete(e),e.f())}),it.size!==0&&on(va)}function wi(t){let e;return it.size===0&&on(va),{promise:new Promise(r=>{it.add(e={c:t,f:r})}),abort(){it.delete(e)}}}function k(t,e){t.appendChild(e)}function xa(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function _i(t){const e=$("style");return ki(xa(t),e),e.sheet}function ki(t,e){k(t.head||t,e)}function z(t,e,r){t.insertBefore(e,r||null)}function N(t){t.parentNode.removeChild(t)}function ya(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function $(t){return document.createElement(t)}function An(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Ie(t){return document.createTextNode(t)}function I(){return Ie(" ")}function Tt(){return Ie("")}function F(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function re(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Le(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function E(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function $n(t,e){const r=Object.getOwnPropertyDescriptors(t.__proto__);for(const n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:r[n]&&r[n].set?t[n]=e[n]:E(t,n,e[n])}function Sn(t,e){for(const r in e)E(t,r,e[r])}function Ci(t){return Array.from(t.childNodes)}function Pt(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function be(t,e){t.value=e==null?"":e}function dt(t,e,r,n){r===null?t.style.removeProperty(e):t.style.setProperty(e,r,n?"important":"")}function mr(t,e){for(let r=0;r<t.options.length;r+=1){const n=t.options[r];if(n.__value===e){n.selected=!0;return}}t.selectedIndex=-1}function ba(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function Oe(t,e,r){t.classList[r?"add":"remove"](e)}function Ei(t,e,{bubbles:r=!1,cancelable:n=!1}={}){const a=document.createEvent("CustomEvent");return a.initCustomEvent(t,r,n,e),a}const cr=new Map;let ur=0;function Ai(t){let e=5381,r=t.length;for(;r--;)e=(e<<5)-e^t.charCodeAt(r);return e>>>0}function $i(t,e){const r={stylesheet:_i(e),rules:{}};return cr.set(t,r),r}function Si(t,e,r,n,a,i,l,o=0){const s=16.666/n;let m=`{
`;for(let x=0;x<=1;x+=s){const h=e+(r-e)*i(x);m+=x*100+`%{${l(h,1-h)}}
`}const u=m+`100% {${l(r,1-r)}}
}`,c=`__svelte_${Ai(u)}_${o}`,g=xa(t),{stylesheet:f,rules:d}=cr.get(g)||$i(g,t);d[c]||(d[c]=!0,f.insertRule(`@keyframes ${c} ${u}`,f.cssRules.length));const p=t.style.animation||"";return t.style.animation=`${p?`${p}, `:""}${c} ${n}ms linear ${a}ms 1 both`,ur+=1,c}function Di(t,e){const r=(t.style.animation||"").split(", "),n=r.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),a=r.length-n.length;a&&(t.style.animation=n.join(", "),ur-=a,ur||Ti())}function Ti(){on(()=>{ur||(cr.forEach(t=>{const{stylesheet:e}=t;let r=e.cssRules.length;for(;r--;)e.deleteRule(r);t.rules={}}),cr.clear())})}function wa(t,e,r,n){if(!e)return Z;const a=t.getBoundingClientRect();if(e.left===a.left&&e.right===a.right&&e.top===a.top&&e.bottom===a.bottom)return Z;const{delay:i=0,duration:l=300,easing:o=vi,start:s=bi()+i,end:m=s+l,tick:u=Z,css:c}=r(t,{from:e,to:a},n);let g=!0,f=!1,d;function p(){c&&(d=Si(t,0,1,l,i,o,c)),i||(f=!0)}function x(){c&&Di(t,d),g=!1}return wi(h=>{if(!f&&h>=s&&(f=!0),f&&h>=m&&(u(1,0),x()),!g)return!1;if(f){const y=h-s,b=0+1*o(y/l);u(b,1-b)}return!0}),p(),u(0,1),x}function _a(t){const e=getComputedStyle(t);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:r,height:n}=e,a=t.getBoundingClientRect();t.style.position="absolute",t.style.width=r,t.style.height=n,Pi(t,a)}}function Pi(t,e){const r=t.getBoundingClientRect();if(e.left!==r.left||e.top!==r.top){const n=getComputedStyle(t),a=n.transform==="none"?"":n.transform;t.style.transform=`${a} translate(${e.left-r.left}px, ${e.top-r.top}px)`}}let wt;function vt(t){wt=t}function ka(){if(!wt)throw new Error("Function called outside component initialization");return wt}function Ki(t){ka().$$.on_mount.push(t)}function He(){const t=ka();return(e,r,{cancelable:n=!1}={})=>{const a=t.$$.callbacks[e];if(a){const i=Ei(e,r,{cancelable:n});return a.slice().forEach(l=>{l.call(t,i)}),!i.defaultPrevented}return!0}}function Ue(t,e){const r=t.$$.callbacks[e.type];r&&r.slice().forEach(n=>n.call(this,e))}const ft=[],we=[],Xt=[],Br=[],Ca=Promise.resolve();let Ir=!1;function Ea(){Ir||(Ir=!0,Ca.then(Aa))}function ji(){return Ea(),Ca}function _t(t){Xt.push(t)}function Nt(t){Br.push(t)}const Ar=new Set;let zt=0;function Aa(){const t=wt;do{for(;zt<ft.length;){const e=ft[zt];zt++,vt(e),Bi(e.$$)}for(vt(null),ft.length=0,zt=0;we.length;)we.pop()();for(let e=0;e<Xt.length;e+=1){const r=Xt[e];Ar.has(r)||(Ar.add(r),r())}Xt.length=0}while(ft.length);for(;Br.length;)Br.pop()();Ir=!1,Ar.clear(),vt(t)}function Bi(t){if(t.fragment!==null){t.update(),me(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_t)}}const Qt=new Set;let Ye;function fe(){Ye={r:0,c:[],p:Ye}}function pe(){Ye.r||me(Ye.c),Ye=Ye.p}function T(t,e){t&&t.i&&(Qt.delete(t),t.i(e))}function K(t,e,r,n){if(t&&t.o){if(Qt.has(t))return;Qt.add(t),Ye.c.push(()=>{Qt.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}}function Ii(t,e){K(t,1,1,()=>{e.delete(t.key)})}function $a(t,e){t.f(),Ii(t,e)}function Sa(t,e,r,n,a,i,l,o,s,m,u,c){let g=t.length,f=i.length,d=g;const p={};for(;d--;)p[t[d].key]=d;const x=[],h=new Map,y=new Map;for(d=f;d--;){const _=c(a,i,d),D=r(_);let A=l.get(D);A?n&&A.p(_,e):(A=m(D,_),A.c()),h.set(D,x[d]=A),D in p&&y.set(D,Math.abs(d-p[D]))}const b=new Set,v=new Set;function w(_){T(_,1),_.m(o,u),l.set(_.key,_),u=_.first,f--}for(;g&&f;){const _=x[f-1],D=t[g-1],A=_.key,S=D.key;_===D?(u=_.first,g--,f--):h.has(S)?!l.has(A)||b.has(A)?w(_):v.has(S)?g--:y.get(A)>y.get(S)?(v.add(A),w(_)):(b.add(S),g--):(s(D,l),g--)}for(;g--;){const _=t[g];h.has(_.key)||s(_,l)}for(;f;)w(x[f-1]);return x}function Da(t,e){const r={},n={},a={$$scope:1};let i=t.length;for(;i--;){const l=t[i],o=e[i];if(o){for(const s in l)s in o||(n[s]=1);for(const s in o)a[s]||(r[s]=o[s],a[s]=1);t[i]=o}else for(const s in l)a[s]=1}for(const l in n)l in r||(r[l]=void 0);return r}function Vt(t,e,r){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=r,r(t.$$.ctx[n]))}function Y(t){t&&t.c()}function U(t,e,r,n){const{fragment:a,on_mount:i,on_destroy:l,after_update:o}=t.$$;a&&a.m(e,r),n||_t(()=>{const s=i.map(ga).filter(da);l?l.push(...s):me(s),t.$$.on_mount=[]}),o.forEach(_t)}function W(t,e){const r=t.$$;r.fragment!==null&&(me(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function Ri(t,e){t.$$.dirty[0]===-1&&(ft.push(t),Ea(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function xe(t,e,r,n,a,i,l,o=[-1]){const s=wt;vt(t);const m=t.$$={fragment:null,ctx:null,props:i,update:Z,not_equal:a,bound:En(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(s?s.$$.context:[])),callbacks:En(),dirty:o,skip_bound:!1,root:e.target||s.$$.root};l&&l(m.root);let u=!1;if(m.ctx=r?r(t,e.props||{},(c,g,...f)=>{const d=f.length?f[0]:g;return m.ctx&&a(m.ctx[c],m.ctx[c]=d)&&(!m.skip_bound&&m.bound[c]&&m.bound[c](d),u&&Ri(t,c)),g}):[],m.update(),u=!0,me(m.before_update),m.fragment=n?n(m.ctx):!1,e.target){if(e.hydrate){const c=Ci(e.target);m.fragment&&m.fragment.l(c),c.forEach(N)}else m.fragment&&m.fragment.c();e.intro&&T(t.$$.fragment),U(t,e.target,e.anchor,e.customElement),Aa()}vt(s)}class ye{$destroy(){W(this,1),this.$destroy=Z}$on(e,r){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{const a=n.indexOf(r);a!==-1&&n.splice(a,1)}}$set(e){this.$$set&&!xi(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Mi(t){const e=t-1;return e*e*e+1}function Ta(t){return--t*t*t*t*t+1}function Pa(t,{from:e,to:r},n={}){const a=getComputedStyle(t),i=a.transform==="none"?"":a.transform,[l,o]=a.transformOrigin.split(" ").map(parseFloat),s=e.left+e.width*l/r.width-(r.left+l),m=e.top+e.height*o/r.height-(r.top+o),{delay:u=0,duration:c=f=>Math.sqrt(f)*120,easing:g=Mi}=n;return{delay:u,duration:da(c)?c(Math.sqrt(s*s+m*m)):c,easing:g,css:(f,d)=>{const p=d*s,x=d*m,h=f+d*e.width/r.width,y=f+d*e.height/r.height;return`transform: ${i} translate(${p}px, ${x}px) scale(${h}, ${y});`}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var V=function(){return V=Object.assign||function(e){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},V.apply(this,arguments)};function Rr(t,e,r){if(r||arguments.length===2)for(var n=0,a=e.length,i;n<a;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}var Q=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,ne=Object.keys,se=Array.isArray;typeof Promise!="undefined"&&!Q.Promise&&(Q.Promise=Promise);function ue(t,e){return typeof e!="object"||ne(e).forEach(function(r){t[r]=e[r]}),t}var kt=Object.getPrototypeOf,Oi={}.hasOwnProperty;function he(t,e){return Oi.call(t,e)}function ot(t,e){typeof e=="function"&&(e=e(kt(t))),(typeof Reflect=="undefined"?ne:Reflect.ownKeys)(e).forEach(function(r){je(t,r,e[r])})}var Ka=Object.defineProperty;function je(t,e,r,n){Ka(t,e,ue(r&&he(r,"get")&&typeof r.get=="function"?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function st(t){return{from:function(e){return t.prototype=Object.create(e.prototype),je(t.prototype,"constructor",t),{extend:ot.bind(null,t.prototype)}}}}var Fi=Object.getOwnPropertyDescriptor;function sn(t,e){var r=Fi(t,e),n;return r||(n=kt(t))&&sn(n,e)}var Li=[].slice;function _r(t,e,r){return Li.call(t,e,r)}function ja(t,e){return e(t)}function pt(t){if(!t)throw new Error("Assertion Failed")}function Ba(t){Q.setImmediate?setImmediate(t):setTimeout(t,0)}function Ia(t,e){return t.reduce(function(r,n,a){var i=e(n,a);return i&&(r[i[0]]=i[1]),r},{})}function Ni(t,e,r){try{t.apply(null,r)}catch(n){e&&e(n)}}function Ke(t,e){if(he(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var r=[],n=0,a=e.length;n<a;++n){var i=Ke(t,e[n]);r.push(i)}return r}var l=e.indexOf(".");if(l!==-1){var o=t[e.substr(0,l)];return o===void 0?void 0:Ke(o,e.substr(l+1))}}function ke(t,e,r){if(!(!t||e===void 0)&&!("isFrozen"in Object&&Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){pt(typeof r!="string"&&"length"in r);for(var n=0,a=e.length;n<a;++n)ke(t,e[n],r[n])}else{var i=e.indexOf(".");if(i!==-1){var l=e.substr(0,i),o=e.substr(i+1);if(o==="")r===void 0?se(t)&&!isNaN(parseInt(l))?t.splice(l,1):delete t[l]:t[l]=r;else{var s=t[l];(!s||!he(t,l))&&(s=t[l]={}),ke(s,o,r)}}else r===void 0?se(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=r}}function zi(t,e){typeof e=="string"?ke(t,e,void 0):"length"in e&&[].map.call(e,function(r){ke(t,r,void 0)})}function Ra(t){var e={};for(var r in t)he(t,r)&&(e[r]=t[r]);return e}var Vi=[].concat;function Ma(t){return Vi.apply([],t)}var Oa="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ma([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return Q[t]}),Hi=Oa.map(function(t){return Q[t]});Ia(Oa,function(t){return[t,!0]});var Me=null;function Kt(t){Me=typeof WeakMap!="undefined"&&new WeakMap;var e=Mr(t);return Me=null,e}function Mr(t){if(!t||typeof t!="object")return t;var e=Me&&Me.get(t);if(e)return e;if(se(t)){e=[],Me&&Me.set(t,e);for(var r=0,n=t.length;r<n;++r)e.push(Mr(t[r]))}else if(Hi.indexOf(t.constructor)>=0)e=t;else{var a=kt(t);e=a===Object.prototype?{}:Object.create(a),Me&&Me.set(t,e);for(var i in t)he(t,i)&&(e[i]=Mr(t[i]))}return e}var Ui={}.toString;function Or(t){return Ui.call(t).slice(8,-1)}var Fr=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",Wi=typeof Fr=="symbol"?function(t){var e;return t!=null&&(e=t[Fr])&&e.apply(t)}:function(){return null},at={};function Te(t){var e,r,n,a;if(arguments.length===1){if(se(t))return t.slice();if(this===at&&typeof t=="string")return[t];if(a=Wi(t)){for(r=[];n=a.next(),!n.done;)r.push(n.value);return r}if(t==null)return[t];if(e=t.length,typeof e=="number"){for(r=new Array(e);e--;)r[e]=t[e];return r}return[t]}for(e=arguments.length,r=new Array(e);e--;)r[e]=arguments[e];return r}var mn=typeof Symbol!="undefined"?function(t){return t[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},$e=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Fa(t,e){$e=t,La=e}var La=function(){return!0},Yi=!new Error("").stack;function et(){if(Yi)try{throw et.arguments,new Error}catch(t){return t}return new Error}function Lr(t,e){var r=t.stack;return r?(e=e||0,r.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),r.split(`
`).slice(e).filter(La).map(function(n){return`
`+n}).join("")):""}var qi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],Na=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],cn=qi.concat(Na),Xi={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function mt(t,e){this._e=et(),this.name=t,this.message=e}st(mt).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Lr(this._e,2))}},toString:function(){return this.name+": "+this.message}});function za(t,e){return t+". Errors: "+Object.keys(e).map(function(r){return e[r].toString()}).filter(function(r,n,a){return a.indexOf(r)===n}).join(`
`)}function gr(t,e,r,n){this._e=et(),this.failures=e,this.failedKeys=n,this.successCount=r,this.message=za(t,e)}st(gr).from(mt);function xt(t,e){this._e=et(),this.name="BulkError",this.failures=Object.keys(e).map(function(r){return e[r]}),this.failuresByPos=e,this.message=za(t,e)}st(xt).from(mt);var un=cn.reduce(function(t,e){return t[e]=e+"Error",t},{}),Qi=mt,M=cn.reduce(function(t,e){var r=e+"Error";function n(a,i){this._e=et(),this.name=r,a?typeof a=="string"?(this.message=""+a+(i?`
 `+i:""),this.inner=i||null):typeof a=="object"&&(this.message=a.name+" "+a.message,this.inner=a):(this.message=Xi[e]||r,this.inner=null)}return st(n).from(Qi),t[e]=n,t},{});M.Syntax=SyntaxError;M.Type=TypeError;M.Range=RangeError;var Dn=Na.reduce(function(t,e){return t[e+"Error"]=M[e],t},{});function Gi(t,e){if(!t||t instanceof mt||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Dn[t.name])return t;var r=new Dn[t.name](e||t.message,t);return"stack"in t&&je(r,"stack",{get:function(){return this.inner.stack}}),r}var kr=cn.reduce(function(t,e){return["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=M[e]),t},{});kr.ModifyError=gr;kr.DexieError=mt;kr.BulkError=xt;function X(){}function jt(t){return t}function Ji(t,e){return t==null||t===jt?e:function(r){return e(t(r))}}function Je(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Zi(t,e){return t===X?e:function(){var r=t.apply(this,arguments);r!==void 0&&(arguments[0]=r);var n=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var i=e.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?Je(n,this.onsuccess):n),a&&(this.onerror=this.onerror?Je(a,this.onerror):a),i!==void 0?i:r}}function el(t,e){return t===X?e:function(){t.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?Je(r,this.onsuccess):r),n&&(this.onerror=this.onerror?Je(n,this.onerror):n)}}function tl(t,e){return t===X?e:function(r){var n=t.apply(this,arguments);ue(r,n);var a=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var l=e.apply(this,arguments);return a&&(this.onsuccess=this.onsuccess?Je(a,this.onsuccess):a),i&&(this.onerror=this.onerror?Je(i,this.onerror):i),n===void 0?l===void 0?void 0:l:ue(n,l)}}function rl(t,e){return t===X?e:function(){return e.apply(this,arguments)===!1?!1:t.apply(this,arguments)}}function gn(t,e){return t===X?e:function(){var r=t.apply(this,arguments);if(r&&typeof r.then=="function"){for(var n=this,a=arguments.length,i=new Array(a);a--;)i[a]=arguments[a];return r.then(function(){return e.apply(n,i)})}return e.apply(this,arguments)}}var Ct={},nl=100,al=20,Va=100,dn=typeof Promise=="undefined"?[]:function(){var t=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[t,kt(t),t];var e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,kt(e),t]}(),Nr=dn[0],dr=dn[1],zr=dn[2],Ha=dr&&dr.then,Gt=Nr&&Nr.constructor,fn=!!zr,Vr=!1,il=zr?function(){zr.then(Ht)}:Q.setImmediate?setImmediate.bind(null,Ht):Q.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){Ht(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(Ht,0)},Et=function(t,e){ht.push([t,e]),fr&&(il(),fr=!1)},Hr=!0,fr=!0,Xe=[],Jt=[],Ur=null,Wr=jt,lt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Kn,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{Kn(t[0],t[1])}catch{}})}},R=lt,ht=[],Qe=0,Zt=[];function P(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=X,this._lib=!1;var e=this._PSD=R;if($e&&(this._stackHolder=et(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Ct)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&qr(this,this._value);return}this._state=null,this._value=null,++e.ref,Wa(this,t)}var Yr={get:function(){var t=R,e=pr;function r(n,a){var i=this,l=!t.global&&(t!==R||e!==pr),o=l&&!Be(),s=new P(function(m,u){pn(i,new Ua(vr(n,t,l,o),vr(a,t,l,o),m,u,t))});return $e&&Xa(s,this),s}return r.prototype=Ct,r},set:function(t){je(this,"then",t&&t.prototype===Ct?Yr:{get:function(){return t},set:Yr.set})}};ot(P.prototype,{then:Yr,_then:function(t,e){pn(this,new Ua(null,null,t,e,R))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],r=arguments[1];return typeof e=="function"?this.then(null,function(n){return n instanceof e?r(n):er(n)}):this.then(null,function(n){return n&&n.name===e?r(n):er(n)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),er(e)})},stack:{get:function(){if(this._stack)return this._stack;try{Vr=!0;var t=qa(this,[],al),e=t.join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Vr=!1}}},timeout:function(t,e){var r=this;return t<1/0?new P(function(n,a){var i=setTimeout(function(){return a(new M.Timeout(e))},t);r.then(n,a).finally(clearTimeout.bind(null,i))}):this}});typeof Symbol!="undefined"&&Symbol.toStringTag&&je(P.prototype,Symbol.toStringTag,"Dexie.Promise");lt.env=Qa();function Ua(t,e,r,n,a){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=r,this.reject=n,this.psd=a}ot(P,{all:function(){var t=Te.apply(null,arguments).map(hr);return new P(function(e,r){t.length===0&&e([]);var n=t.length;t.forEach(function(a,i){return P.resolve(a).then(function(l){t[i]=l,--n||e(t)},r)})})},resolve:function(t){if(t instanceof P)return t;if(t&&typeof t.then=="function")return new P(function(r,n){t.then(r,n)});var e=new P(Ct,!0,t);return Xa(e,Ur),e},reject:er,race:function(){var t=Te.apply(null,arguments).map(hr);return new P(function(e,r){t.map(function(n){return P.resolve(n).then(e,r)})})},PSD:{get:function(){return R},set:function(t){return R=t}},totalEchoes:{get:function(){return pr}},newPSD:Ne,usePSD:ut,scheduler:{get:function(){return Et},set:function(t){Et=t}},rejectionMapper:{get:function(){return Wr},set:function(t){Wr=t}},follow:function(t,e){return new P(function(r,n){return Ne(function(a,i){var l=R;l.unhandleds=[],l.onunhandled=i,l.finalize=Je(function(){var o=this;ol(function(){o.unhandleds.length===0?a():i(o.unhandleds[0])})},l.finalize),t()},e,r,n)})}});Gt&&(Gt.allSettled&&je(P,"allSettled",function(){var t=Te.apply(null,arguments).map(hr);return new P(function(e){t.length===0&&e([]);var r=t.length,n=new Array(r);t.forEach(function(a,i){return P.resolve(a).then(function(l){return n[i]={status:"fulfilled",value:l}},function(l){return n[i]={status:"rejected",reason:l}}).then(function(){return--r||e(n)})})})}),Gt.any&&typeof AggregateError!="undefined"&&je(P,"any",function(){var t=Te.apply(null,arguments).map(hr);return new P(function(e,r){t.length===0&&r(new AggregateError([]));var n=t.length,a=new Array(n);t.forEach(function(i,l){return P.resolve(i).then(function(o){return e(o)},function(o){a[l]=o,--n||r(new AggregateError(a))})})})}));function Wa(t,e){try{e(function(r){if(t._state===null){if(r===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&Bt();r&&typeof r.then=="function"?Wa(t,function(a,i){r instanceof P?r._then(a,i):r.then(a,i)}):(t._state=!0,t._value=r,Ya(t)),n&&It()}},qr.bind(null,t))}catch(r){qr(t,r)}}function qr(t,e){if(Jt.push(e),t._state===null){var r=t._lib&&Bt();e=Wr(e),t._state=!1,t._value=e,$e&&e!==null&&typeof e=="object"&&!e._promise&&Ni(function(){var n=sn(e,"stack");e._promise=t,je(e,"stack",{get:function(){return Vr?n&&(n.get?n.get.apply(e):n.value):t.stack}})}),sl(t),Ya(t),r&&It()}}function Ya(t){var e=t._listeners;t._listeners=[];for(var r=0,n=e.length;r<n;++r)pn(t,e[r]);var a=t._PSD;--a.ref||a.finalize(),Qe===0&&(++Qe,Et(function(){--Qe===0&&hn()},[]))}function pn(t,e){if(t._state===null){t._listeners.push(e);return}var r=t._state?e.onFulfilled:e.onRejected;if(r===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Qe,Et(ll,[r,t,e])}function ll(t,e,r){try{Ur=e;var n,a=e._value;e._state?n=t(a):(Jt.length&&(Jt=[]),n=t(a),Jt.indexOf(a)===-1&&ml(e)),r.resolve(n)}catch(i){r.reject(i)}finally{Ur=null,--Qe===0&&hn(),--r.psd.ref||r.psd.finalize()}}function qa(t,e,r){if(e.length===r)return e;var n="";if(t._state===!1){var a=t._value,i,l;a!=null?(i=a.name||"Error",l=a.message||a,n=Lr(a,0)):(i=a,l=""),e.push(i+(l?": "+l:"")+n)}return $e&&(n=Lr(t._stackHolder,2),n&&e.indexOf(n)===-1&&e.push(n),t._prev&&qa(t._prev,e,r)),e}function Xa(t,e){var r=e?e._numPrev+1:0;r<nl&&(t._prev=e,t._numPrev=r)}function Ht(){Bt()&&It()}function Bt(){var t=Hr;return Hr=!1,fr=!1,t}function It(){var t,e,r;do for(;ht.length>0;)for(t=ht,ht=[],r=t.length,e=0;e<r;++e){var n=t[e];n[0].apply(null,n[1])}while(ht.length>0);Hr=!0,fr=!0}function hn(){var t=Xe;Xe=[],t.forEach(function(n){n._PSD.onunhandled.call(null,n._value,n)});for(var e=Zt.slice(0),r=e.length;r;)e[--r]()}function ol(t){function e(){t(),Zt.splice(Zt.indexOf(e),1)}Zt.push(e),++Qe,Et(function(){--Qe===0&&hn()},[])}function sl(t){Xe.some(function(e){return e._value===t._value})||Xe.push(t)}function ml(t){for(var e=Xe.length;e;)if(Xe[--e]._value===t._value){Xe.splice(e,1);return}}function er(t){return new P(Ct,!1,t)}function J(t,e){var r=R;return function(){var n=Bt(),a=R;try{return ze(r,!0),t.apply(this,arguments)}catch(i){e&&e(i)}finally{ze(a,!1),n&&It()}}}var oe={awaits:0,echoes:0,id:0},cl=0,tr=[],$r=0,pr=0,ul=0;function Ne(t,e,r,n){var a=R,i=Object.create(a);i.parent=a,i.ref=0,i.global=!1,i.id=++ul;var l=lt.env;i.env=fn?{Promise:P,PromiseProp:{value:P,configurable:!0,writable:!0},all:P.all,race:P.race,allSettled:P.allSettled,any:P.any,resolve:P.resolve,reject:P.reject,nthen:Tn(l.nthen,i),gthen:Tn(l.gthen,i)}:{},e&&ue(i,e),++a.ref,i.finalize=function(){--this.parent.ref||this.parent.finalize()};var o=ut(i,t,r,n);return i.ref===0&&i.finalize(),o}function ct(){return oe.id||(oe.id=++cl),++oe.awaits,oe.echoes+=Va,oe.id}function Be(){return oe.awaits?(--oe.awaits===0&&(oe.id=0),oe.echoes=oe.awaits*Va,!0):!1}(""+Ha).indexOf("[native code]")===-1&&(ct=Be=X);function hr(t){return oe.echoes&&t&&t.constructor===Gt?(ct(),t.then(function(e){return Be(),e},function(e){return Be(),ae(e)})):t}function gl(t){++pr,(!oe.echoes||--oe.echoes===0)&&(oe.echoes=oe.id=0),tr.push(R),ze(t,!0)}function dl(){var t=tr[tr.length-1];tr.pop(),ze(t,!1)}function ze(t,e){var r=R;if((e?oe.echoes&&(!$r++||t!==R):$r&&(!--$r||t!==R))&&Ga(e?gl.bind(null,t):dl),t!==R&&(R=t,r===lt&&(lt.env=Qa()),fn)){var n=lt.env.Promise,a=t.env;dr.then=a.nthen,n.prototype.then=a.gthen,(r.global||t.global)&&(Object.defineProperty(Q,"Promise",a.PromiseProp),n.all=a.all,n.race=a.race,n.resolve=a.resolve,n.reject=a.reject,a.allSettled&&(n.allSettled=a.allSettled),a.any&&(n.any=a.any))}}function Qa(){var t=Q.Promise;return fn?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(Q,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:dr.then,gthen:t.prototype.then}:{}}function ut(t,e,r,n,a){var i=R;try{return ze(t,!0),e(r,n,a)}finally{ze(i,!1)}}function Ga(t){Ha.call(Nr,t)}function vr(t,e,r,n){return typeof t!="function"?t:function(){var a=R;r&&ct(),ze(e,!0);try{return t.apply(this,arguments)}finally{ze(a,!1),n&&Ga(Be)}}}function Tn(t,e){return function(r,n){return t.call(this,vr(r,e),vr(n,e))}}var Pn="unhandledrejection";function Kn(t,e){var r;try{r=e.onuncatched(t)}catch{}if(r!==!1)try{var n,a={promise:e,reason:t};if(Q.document&&document.createEvent?(n=document.createEvent("Event"),n.initEvent(Pn,!0,!0),ue(n,a)):Q.CustomEvent&&(n=new CustomEvent(Pn,{detail:a}),ue(n,a)),n&&Q.dispatchEvent&&(dispatchEvent(n),!Q.PromiseRejectionEvent&&Q.onunhandledrejection))try{Q.onunhandledrejection(n)}catch{}$e&&n&&!n.defaultPrevented&&console.warn("Unhandled rejection: "+(t.stack||t))}catch{}}var ae=P.reject;function Xr(t,e,r,n){if(!t.idbdb||!t._state.openComplete&&!R.letThrough&&!t._vip){if(t._state.openComplete)return ae(new M.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return ae(new M.DatabaseClosed);t.open().catch(X)}return t._state.dbReadyPromise.then(function(){return Xr(t,e,r,n)})}else{var a=t._createTransaction(e,r,t._dbSchema);try{a.create(),t._state.PR1398_maxLoop=3}catch(i){return i.name===un.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return Xr(t,e,r,n)})):ae(i)}return a._promise(e,function(i,l){return Ne(function(){return R.trans=a,n(i,l,a)})}).then(function(i){return a._completion.then(function(){return i})})}}var jn="3.2.2",qe=String.fromCharCode(65535),Qr=-1/0,Se="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ja="String expected.",yt=[],Cr=typeof navigator!="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),fl=Cr,pl=Cr,Za=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)},Er="__dbnames",Sr="readonly",Dr="readwrite";function Ze(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}var ei={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ut(t){return typeof t=="string"&&!/\./.test(t)?function(e){return e[t]===void 0&&t in e&&(e=Kt(e),delete e[t]),e}:function(e){return e}}var hl=function(){function t(){}return t.prototype._trans=function(e,r,n){var a=this._tx||R.trans,i=this.name;function l(s,m,u){if(!u.schema[i])throw new M.NotFound("Table "+i+" not part of transaction");return r(u.idbtrans,u)}var o=Bt();try{return a&&a.db===this.db?a===R.trans?a._promise(e,l,n):Ne(function(){return a._promise(e,l,n)},{trans:a,transless:R.transless||R}):Xr(this.db,e,[this.name],l)}finally{o&&It()}},t.prototype.get=function(e,r){var n=this;return e&&e.constructor===Object?this.where(e).first(r):this._trans("readonly",function(a){return n.core.get({trans:a,key:e}).then(function(i){return n.hook.reading.fire(i)})}).then(r)},t.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(se(e))return new this.db.WhereClause(this,"["+e.join("+")+"]");var r=ne(e);if(r.length===1)return this.where(r[0]).equals(e[r[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(u){return u.compound&&r.every(function(c){return u.keyPath.indexOf(c)>=0})&&u.keyPath.every(function(c){return r.indexOf(c)>=0})})[0];if(n&&this.db._maxKey!==qe)return this.where(n.name).equals(n.keyPath.map(function(u){return e[u]}));!n&&$e&&console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a "+("compound index ["+r.join("+")+"]"));var a=this.schema.idxByName,i=this.db._deps.indexedDB;function l(u,c){try{return i.cmp(u,c)===0}catch{return!1}}var o=r.reduce(function(u,c){var g=u[0],f=u[1],d=a[c],p=e[c];return[g||d,g||!d?Ze(f,d&&d.multi?function(x){var h=Ke(x,c);return se(h)&&h.some(function(y){return l(p,y)})}:function(x){return l(p,Ke(x,c))}):f]},[null,null]),s=o[0],m=o[1];return s?this.where(s.name).equals(e[s.keyPath]).filter(m):n?this.filter(m):this.where(r).equals("")},t.prototype.filter=function(e){return this.toCollection().and(e)},t.prototype.count=function(e){return this.toCollection().count(e)},t.prototype.offset=function(e){return this.toCollection().offset(e)},t.prototype.limit=function(e){return this.toCollection().limit(e)},t.prototype.each=function(e){return this.toCollection().each(e)},t.prototype.toArray=function(e){return this.toCollection().toArray(e)},t.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},t.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,se(e)?"["+e.join("+")+"]":e))},t.prototype.reverse=function(){return this.toCollection().reverse()},t.prototype.mapToClass=function(e){this.schema.mappedClass=e;var r=function(n){if(!n)return n;var a=Object.create(e.prototype);for(var i in n)if(he(n,i))try{a[i]=n[i]}catch{}return a};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),e},t.prototype.defineClass=function(){function e(r){ue(this,r)}return this.mapToClass(e)},t.prototype.add=function(e,r){var n=this,a=this.schema.primKey,i=a.auto,l=a.keyPath,o=e;return l&&i&&(o=Ut(l)(e)),this._trans("readwrite",function(s){return n.core.mutate({trans:s,type:"add",keys:r!=null?[r]:null,values:[o]})}).then(function(s){return s.numFailures?P.reject(s.failures[0]):s.lastResult}).then(function(s){if(l)try{ke(e,l,s)}catch{}return s})},t.prototype.update=function(e,r){if(typeof e=="object"&&!se(e)){var n=Ke(e,this.schema.primKey.keyPath);if(n===void 0)return ae(new M.InvalidArgument("Given object does not contain its primary key"));try{typeof r!="function"?ne(r).forEach(function(a){ke(e,a,r[a])}):r(e,{value:e,primKey:n})}catch{}return this.where(":id").equals(n).modify(r)}else return this.where(":id").equals(e).modify(r)},t.prototype.put=function(e,r){var n=this,a=this.schema.primKey,i=a.auto,l=a.keyPath,o=e;return l&&i&&(o=Ut(l)(e)),this._trans("readwrite",function(s){return n.core.mutate({trans:s,type:"put",values:[o],keys:r!=null?[r]:null})}).then(function(s){return s.numFailures?P.reject(s.failures[0]):s.lastResult}).then(function(s){if(l)try{ke(e,l,s)}catch{}return s})},t.prototype.delete=function(e){var r=this;return this._trans("readwrite",function(n){return r.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(n){return n.numFailures?P.reject(n.failures[0]):void 0})},t.prototype.clear=function(){var e=this;return this._trans("readwrite",function(r){return e.core.mutate({trans:r,type:"deleteRange",range:ei})}).then(function(r){return r.numFailures?P.reject(r.failures[0]):void 0})},t.prototype.bulkGet=function(e){var r=this;return this._trans("readonly",function(n){return r.core.getMany({keys:e,trans:n}).then(function(a){return a.map(function(i){return r.hook.reading.fire(i)})})})},t.prototype.bulkAdd=function(e,r,n){var a=this,i=Array.isArray(r)?r:void 0;n=n||(i?void 0:r);var l=n?n.allKeys:void 0;return this._trans("readwrite",function(o){var s=a.schema.primKey,m=s.auto,u=s.keyPath;if(u&&i)throw new M.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new M.InvalidArgument("Arguments objects and keys must have the same length");var c=e.length,g=u&&m?e.map(Ut(u)):e;return a.core.mutate({trans:o,type:"add",keys:i,values:g,wantResults:l}).then(function(f){var d=f.numFailures,p=f.results,x=f.lastResult,h=f.failures,y=l?p:x;if(d===0)return y;throw new xt(a.name+".bulkAdd(): "+d+" of "+c+" operations failed",h)})})},t.prototype.bulkPut=function(e,r,n){var a=this,i=Array.isArray(r)?r:void 0;n=n||(i?void 0:r);var l=n?n.allKeys:void 0;return this._trans("readwrite",function(o){var s=a.schema.primKey,m=s.auto,u=s.keyPath;if(u&&i)throw new M.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new M.InvalidArgument("Arguments objects and keys must have the same length");var c=e.length,g=u&&m?e.map(Ut(u)):e;return a.core.mutate({trans:o,type:"put",keys:i,values:g,wantResults:l}).then(function(f){var d=f.numFailures,p=f.results,x=f.lastResult,h=f.failures,y=l?p:x;if(d===0)return y;throw new xt(a.name+".bulkPut(): "+d+" of "+c+" operations failed",h)})})},t.prototype.bulkDelete=function(e){var r=this,n=e.length;return this._trans("readwrite",function(a){return r.core.mutate({trans:a,type:"delete",keys:e})}).then(function(a){var i=a.numFailures,l=a.lastResult,o=a.failures;if(i===0)return l;throw new xt(r.name+".bulkDelete(): "+i+" of "+n+" operations failed",o)})},t}();function Rt(t){var e={},r=function(o,s){if(s){for(var m=arguments.length,u=new Array(m-1);--m;)u[m-1]=arguments[m];return e[o].subscribe.apply(null,u),t}else if(typeof o=="string")return e[o]};r.addEventType=i;for(var n=1,a=arguments.length;n<a;++n)i(arguments[n]);return r;function i(o,s,m){if(typeof o=="object")return l(o);s||(s=rl),m||(m=X);var u={subscribers:[],fire:m,subscribe:function(c){u.subscribers.indexOf(c)===-1&&(u.subscribers.push(c),u.fire=s(u.fire,c))},unsubscribe:function(c){u.subscribers=u.subscribers.filter(function(g){return g!==c}),u.fire=u.subscribers.reduce(s,m)}};return e[o]=r[o]=u,u}function l(o){ne(o).forEach(function(s){var m=o[s];if(se(m))i(s,o[s][0],o[s][1]);else if(m==="asap")var u=i(s,jt,function(){for(var g=arguments.length,f=new Array(g);g--;)f[g]=arguments[g];u.subscribers.forEach(function(d){Ba(function(){d.apply(null,f)})})});else throw new M.InvalidArgument("Invalid event config")})}}function Mt(t,e){return st(e).from({prototype:t}),e}function vl(t){return Mt(hl.prototype,function(r,n,a){this.db=t,this._tx=a,this.name=r,this.schema=n,this.hook=t._allTables[r]?t._allTables[r].hook:Rt(null,{creating:[Zi,X],reading:[Ji,jt],updating:[tl,X],deleting:[el,X]})})}function rt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function Tr(t,e){t.filter=Ze(t.filter,e)}function Pr(t,e,r){var n=t.replayFilter;t.replayFilter=n?function(){return Ze(n(),e())}:e,t.justLimit=r&&!n}function xl(t,e){t.isMatch=Ze(t.isMatch,e)}function rr(t,e){if(t.isPrimKey)return e.primaryKey;var r=e.getIndexByKeyPath(t.index);if(!r)throw new M.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return r}function Bn(t,e,r){var n=rr(t,e.schema);return e.openCursor({trans:r,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:n,range:t.range}})}function Wt(t,e,r,n){var a=t.replayFilter?Ze(t.filter,t.replayFilter()):t.filter;if(t.or){var i={},l=function(o,s,m){if(!a||a(s,m,function(g){return s.stop(g)},function(g){return s.fail(g)})){var u=s.primaryKey,c=""+u;c==="[object ArrayBuffer]"&&(c=""+new Uint8Array(u)),he(i,c)||(i[c]=!0,e(o,s,m))}};return Promise.all([t.or._iterate(l,r),In(Bn(t,n,r),t.algorithm,l,!t.keysOnly&&t.valueMapper)])}else return In(Bn(t,n,r),Ze(t.algorithm,a),e,!t.keysOnly&&t.valueMapper)}function In(t,e,r,n){var a=n?function(l,o,s){return r(n(l),o,s)}:r,i=J(a);return t.then(function(l){if(l)return l.start(function(){var o=function(){return l.continue()};(!e||e(l,function(s){return o=s},function(s){l.stop(s),o=X},function(s){l.fail(s),o=X}))&&i(l.value,l,function(s){return o=s}),o()})})}function ce(t,e){try{var r=Rn(t),n=Rn(e);if(r!==n)return r==="Array"?1:n==="Array"?-1:r==="binary"?1:n==="binary"?-1:r==="string"?1:n==="string"?-1:r==="Date"?1:n!=="Date"?NaN:-1;switch(r){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return bl(Mn(t),Mn(e));case"Array":return yl(t,e)}}catch{}return NaN}function yl(t,e){for(var r=t.length,n=e.length,a=r<n?r:n,i=0;i<a;++i){var l=ce(t[i],e[i]);if(l!==0)return l}return r===n?0:r<n?-1:1}function bl(t,e){for(var r=t.length,n=e.length,a=r<n?r:n,i=0;i<a;++i)if(t[i]!==e[i])return t[i]<e[i]?-1:1;return r===n?0:r<n?-1:1}function Rn(t){var e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";var r=Or(t);return r==="ArrayBuffer"?"binary":r}function Mn(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}var wl=function(){function t(){}return t.prototype._read=function(e,r){var n=this._ctx;return n.error?n.table._trans(null,ae.bind(null,n.error)):n.table._trans("readonly",e).then(r)},t.prototype._write=function(e){var r=this._ctx;return r.error?r.table._trans(null,ae.bind(null,r.error)):r.table._trans("readwrite",e,"locked")},t.prototype._addAlgorithm=function(e){var r=this._ctx;r.algorithm=Ze(r.algorithm,e)},t.prototype._iterate=function(e,r){return Wt(this._ctx,e,r,this._ctx.table.core)},t.prototype.clone=function(e){var r=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&ue(n,e),r._ctx=n,r},t.prototype.raw=function(){return this._ctx.valueMapper=null,this},t.prototype.each=function(e){var r=this._ctx;return this._read(function(n){return Wt(r,e,n,r.table.core)})},t.prototype.count=function(e){var r=this;return this._read(function(n){var a=r._ctx,i=a.table.core;if(rt(a,!0))return i.count({trans:n,query:{index:rr(a,i.schema),range:a.range}}).then(function(o){return Math.min(o,a.limit)});var l=0;return Wt(a,function(){return++l,!1},n,i).then(function(){return l})}).then(e)},t.prototype.sortBy=function(e,r){var n=e.split(".").reverse(),a=n[0],i=n.length-1;function l(m,u){return u?l(m[n[u]],u-1):m[a]}var o=this._ctx.dir==="next"?1:-1;function s(m,u){var c=l(m,i),g=l(u,i);return c<g?-o:c>g?o:0}return this.toArray(function(m){return m.sort(s)}).then(r)},t.prototype.toArray=function(e){var r=this;return this._read(function(n){var a=r._ctx;if(a.dir==="next"&&rt(a,!0)&&a.limit>0){var i=a.valueMapper,l=rr(a,a.table.core.schema);return a.table.core.query({trans:n,limit:a.limit,values:!0,query:{index:l,range:a.range}}).then(function(s){var m=s.result;return i?m.map(i):m})}else{var o=[];return Wt(a,function(s){return o.push(s)},n,a.table.core).then(function(){return o})}},e)},t.prototype.offset=function(e){var r=this._ctx;return e<=0?this:(r.offset+=e,rt(r)?Pr(r,function(){var n=e;return function(a,i){return n===0?!0:n===1?(--n,!1):(i(function(){a.advance(n),n=0}),!1)}}):Pr(r,function(){var n=e;return function(){return--n<0}}),this)},t.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Pr(this._ctx,function(){var r=e;return function(n,a,i){return--r<=0&&a(i),r>=0}},!0),this},t.prototype.until=function(e,r){return Tr(this._ctx,function(n,a,i){return e(n.value)?(a(i),r):!0}),this},t.prototype.first=function(e){return this.limit(1).toArray(function(r){return r[0]}).then(e)},t.prototype.last=function(e){return this.reverse().first(e)},t.prototype.filter=function(e){return Tr(this._ctx,function(r){return e(r.value)}),xl(this._ctx,e),this},t.prototype.and=function(e){return this.filter(e)},t.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},t.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},t.prototype.desc=function(){return this.reverse()},t.prototype.eachKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(n,a){e(a.key,a)})},t.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},t.prototype.eachPrimaryKey=function(e){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(n,a){e(a.primaryKey,a)})},t.prototype.keys=function(e){var r=this._ctx;r.keysOnly=!r.isMatch;var n=[];return this.each(function(a,i){n.push(i.key)}).then(function(){return n}).then(e)},t.prototype.primaryKeys=function(e){var r=this._ctx;if(r.dir==="next"&&rt(r,!0)&&r.limit>0)return this._read(function(a){var i=rr(r,r.table.core.schema);return r.table.core.query({trans:a,values:!1,limit:r.limit,query:{index:i,range:r.range}})}).then(function(a){var i=a.result;return i}).then(e);r.keysOnly=!r.isMatch;var n=[];return this.each(function(a,i){n.push(i.primaryKey)}).then(function(){return n}).then(e)},t.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},t.prototype.firstKey=function(e){return this.limit(1).keys(function(r){return r[0]}).then(e)},t.prototype.lastKey=function(e){return this.reverse().firstKey(e)},t.prototype.distinct=function(){var e=this._ctx,r=e.index&&e.table.schema.idxByName[e.index];if(!r||!r.multi)return this;var n={};return Tr(this._ctx,function(a){var i=a.primaryKey.toString(),l=he(n,i);return n[i]=!0,!l}),this},t.prototype.modify=function(e){var r=this,n=this._ctx;return this._write(function(a){var i;if(typeof e=="function")i=e;else{var l=ne(e),o=l.length;i=function(h){for(var y=!1,b=0;b<o;++b){var v=l[b],w=e[v];Ke(h,v)!==w&&(ke(h,v,w),y=!0)}return y}}var s=n.table.core,m=s.schema.primaryKey,u=m.outbound,c=m.extractKey,g=r.db._options.modifyChunkSize||200,f=[],d=0,p=[],x=function(h,y){var b=y.failures,v=y.numFailures;d+=h-v;for(var w=0,_=ne(b);w<_.length;w++){var D=_[w];f.push(b[D])}};return r.clone().primaryKeys().then(function(h){var y=function(b){var v=Math.min(g,h.length-b);return s.getMany({trans:a,keys:h.slice(b,b+v),cache:"immutable"}).then(function(w){for(var _=[],D=[],A=u?[]:null,S=[],j=0;j<v;++j){var B=w[j],O={value:Kt(B),primKey:h[b+j]};i.call(O,O.value,O)!==!1&&(O.value==null?S.push(h[b+j]):!u&&ce(c(B),c(O.value))!==0?(S.push(h[b+j]),_.push(O.value)):(D.push(O.value),u&&A.push(h[b+j])))}var H=rt(n)&&n.limit===1/0&&(typeof e!="function"||e===Kr)&&{index:n.index,range:n.range};return Promise.resolve(_.length>0&&s.mutate({trans:a,type:"add",values:_}).then(function(te){for(var C in te.failures)S.splice(parseInt(C),1);x(_.length,te)})).then(function(){return(D.length>0||H&&typeof e=="object")&&s.mutate({trans:a,type:"put",keys:A,values:D,criteria:H,changeSpec:typeof e!="function"&&e}).then(function(te){return x(D.length,te)})}).then(function(){return(S.length>0||H&&e===Kr)&&s.mutate({trans:a,type:"delete",keys:S,criteria:H}).then(function(te){return x(S.length,te)})}).then(function(){return h.length>b+v&&y(b+g)})})};return y(0).then(function(){if(f.length>0)throw new gr("Error modifying one or more objects",f,d,p);return h.length})})})},t.prototype.delete=function(){var e=this._ctx,r=e.range;return rt(e)&&(e.isPrimKey&&!pl||r.type===3)?this._write(function(n){var a=e.table.core.schema.primaryKey,i=r;return e.table.core.count({trans:n,query:{index:a,range:i}}).then(function(l){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then(function(o){var s=o.failures;o.lastResult,o.results;var m=o.numFailures;if(m)throw new gr("Could not delete some values",Object.keys(s).map(function(u){return s[u]}),l-m);return l-m})})}):this.modify(Kr)},t}(),Kr=function(t,e){return e.value=null};function _l(t){return Mt(wl.prototype,function(r,n){this.db=t;var a=ei,i=null;if(n)try{a=n()}catch(m){i=m}var l=r._ctx,o=l.table,s=o.hook.reading.fire;this._ctx={table:o,index:l.index,isPrimKey:!l.index||o.schema.primKey.keyPath&&l.index===o.schema.primKey.name,range:a,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:i,or:l.or,valueMapper:s!==jt?s:null}})}function kl(t,e){return t<e?-1:t===e?0:1}function Cl(t,e){return t>e?-1:t===e?0:1}function de(t,e,r){var n=t instanceof ri?new t.Collection(t):t;return n._ctx.error=r?new r(e):new TypeError(e),n}function nt(t){return new t.Collection(t,function(){return ti("")}).limit(0)}function El(t){return t==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function Al(t){return t==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function $l(t,e,r,n,a,i){for(var l=Math.min(t.length,n.length),o=-1,s=0;s<l;++s){var m=e[s];if(m!==n[s])return a(t[s],r[s])<0?t.substr(0,s)+r[s]+r.substr(s+1):a(t[s],n[s])<0?t.substr(0,s)+n[s]+r.substr(s+1):o>=0?t.substr(0,o)+e[o]+r.substr(o+1):null;a(t[s],m)<0&&(o=s)}return l<n.length&&i==="next"?t+r.substr(t.length):l<t.length&&i==="prev"?t.substr(0,r.length):o<0?null:t.substr(0,o)+n[o]+r.substr(o+1)}function Yt(t,e,r,n){var a,i,l,o,s,m,u,c=r.length;if(!r.every(function(p){return typeof p=="string"}))return de(t,Ja);function g(p){a=El(p),i=Al(p),l=p==="next"?kl:Cl;var x=r.map(function(h){return{lower:i(h),upper:a(h)}}).sort(function(h,y){return l(h.lower,y.lower)});o=x.map(function(h){return h.upper}),s=x.map(function(h){return h.lower}),m=p,u=p==="next"?"":n}g("next");var f=new t.Collection(t,function(){return Re(o[0],s[c-1]+n)});f._ondirectionchange=function(p){g(p)};var d=0;return f._addAlgorithm(function(p,x,h){var y=p.key;if(typeof y!="string")return!1;var b=i(y);if(e(b,s,d))return!0;for(var v=null,w=d;w<c;++w){var _=$l(y,b,o[w],s[w],l,m);_===null&&v===null?d=w+1:(v===null||l(v,_)>0)&&(v=_)}return x(v!==null?function(){p.continue(v+u)}:h),!1}),f}function Re(t,e,r,n){return{type:2,lower:t,upper:e,lowerOpen:r,upperOpen:n}}function ti(t){return{type:1,lower:t,upper:t}}var ri=function(){function t(){}return Object.defineProperty(t.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),t.prototype.between=function(e,r,n,a){n=n!==!1,a=a===!0;try{return this._cmp(e,r)>0||this._cmp(e,r)===0&&(n||a)&&!(n&&a)?nt(this):new this.Collection(this,function(){return Re(e,r,!n,!a)})}catch{return de(this,Se)}},t.prototype.equals=function(e){return e==null?de(this,Se):new this.Collection(this,function(){return ti(e)})},t.prototype.above=function(e){return e==null?de(this,Se):new this.Collection(this,function(){return Re(e,void 0,!0)})},t.prototype.aboveOrEqual=function(e){return e==null?de(this,Se):new this.Collection(this,function(){return Re(e,void 0,!1)})},t.prototype.below=function(e){return e==null?de(this,Se):new this.Collection(this,function(){return Re(void 0,e,!1,!0)})},t.prototype.belowOrEqual=function(e){return e==null?de(this,Se):new this.Collection(this,function(){return Re(void 0,e)})},t.prototype.startsWith=function(e){return typeof e!="string"?de(this,Ja):this.between(e,e+qe,!0,!0)},t.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):Yt(this,function(r,n){return r.indexOf(n[0])===0},[e],qe)},t.prototype.equalsIgnoreCase=function(e){return Yt(this,function(r,n){return r===n[0]},[e],"")},t.prototype.anyOfIgnoreCase=function(){var e=Te.apply(at,arguments);return e.length===0?nt(this):Yt(this,function(r,n){return n.indexOf(r)!==-1},e,"")},t.prototype.startsWithAnyOfIgnoreCase=function(){var e=Te.apply(at,arguments);return e.length===0?nt(this):Yt(this,function(r,n){return n.some(function(a){return r.indexOf(a)===0})},e,qe)},t.prototype.anyOf=function(){var e=this,r=Te.apply(at,arguments),n=this._cmp;try{r.sort(n)}catch{return de(this,Se)}if(r.length===0)return nt(this);var a=new this.Collection(this,function(){return Re(r[0],r[r.length-1])});a._ondirectionchange=function(l){n=l==="next"?e._ascending:e._descending,r.sort(n)};var i=0;return a._addAlgorithm(function(l,o,s){for(var m=l.key;n(m,r[i])>0;)if(++i,i===r.length)return o(s),!1;return n(m,r[i])===0?!0:(o(function(){l.continue(r[i])}),!1)}),a},t.prototype.notEqual=function(e){return this.inAnyRange([[Qr,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},t.prototype.noneOf=function(){var e=Te.apply(at,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return de(this,Se)}var r=e.reduce(function(n,a){return n?n.concat([[n[n.length-1][1],a]]):[[Qr,a]]},null);return r.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})},t.prototype.inAnyRange=function(e,r){var n=this,a=this._cmp,i=this._ascending,l=this._descending,o=this._min,s=this._max;if(e.length===0)return nt(this);if(!e.every(function(w){return w[0]!==void 0&&w[1]!==void 0&&i(w[0],w[1])<=0}))return de(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",M.InvalidArgument);var m=!r||r.includeLowers!==!1,u=r&&r.includeUppers===!0;function c(w,_){for(var D=0,A=w.length;D<A;++D){var S=w[D];if(a(_[0],S[1])<0&&a(_[1],S[0])>0){S[0]=o(S[0],_[0]),S[1]=s(S[1],_[1]);break}}return D===A&&w.push(_),w}var g=i;function f(w,_){return g(w[0],_[0])}var d;try{d=e.reduce(c,[]),d.sort(f)}catch{return de(this,Se)}var p=0,x=u?function(w){return i(w,d[p][1])>0}:function(w){return i(w,d[p][1])>=0},h=m?function(w){return l(w,d[p][0])>0}:function(w){return l(w,d[p][0])>=0};function y(w){return!x(w)&&!h(w)}var b=x,v=new this.Collection(this,function(){return Re(d[0][0],d[d.length-1][1],!m,!u)});return v._ondirectionchange=function(w){w==="next"?(b=x,g=i):(b=h,g=l),d.sort(f)},v._addAlgorithm(function(w,_,D){for(var A=w.key;b(A);)if(++p,p===d.length)return _(D),!1;return y(A)?!0:(n._cmp(A,d[p][1])===0||n._cmp(A,d[p][0])===0||_(function(){g===i?w.continue(d[p][0]):w.continue(d[p][1])}),!1)}),v},t.prototype.startsWithAnyOf=function(){var e=Te.apply(at,arguments);return e.every(function(r){return typeof r=="string"})?e.length===0?nt(this):this.inAnyRange(e.map(function(r){return[r,r+qe]})):de(this,"startsWithAnyOf() only works with strings")},t}();function Sl(t){return Mt(ri.prototype,function(r,n,a){this.db=t,this._ctx={table:r,index:n===":id"?null:n,or:a};var i=t._deps.indexedDB;if(!i)throw new M.MissingAPI;this._cmp=this._ascending=i.cmp.bind(i),this._descending=function(l,o){return i.cmp(o,l)},this._max=function(l,o){return i.cmp(l,o)>0?l:o},this._min=function(l,o){return i.cmp(l,o)<0?l:o},this._IDBKeyRange=t._deps.IDBKeyRange})}function Ae(t){return J(function(e){return At(e),t(e.target.error),!1})}function At(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}var $t="storagemutated",Fe="x-storagemutated-1",Ve=Rt(null,$t),Dl=function(){function t(){}return t.prototype._lock=function(){return pt(!R.global),++this._reculock,this._reculock===1&&!R.global&&(R.lockOwnerFor=this),this},t.prototype._unlock=function(){if(pt(!R.global),--this._reculock===0)for(R.global||(R.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{ut(e[1],e[0])}catch{}}return this},t.prototype._locked=function(){return this._reculock&&R.lockOwnerFor!==this},t.prototype.create=function(e){var r=this;if(!this.mode)return this;var n=this.db.idbdb,a=this.db._state.dbOpenError;if(pt(!this.idbtrans),!e&&!n)switch(a&&a.name){case"DatabaseClosedError":throw new M.DatabaseClosed(a);case"MissingAPIError":throw new M.MissingAPI(a.message,a);default:throw new M.OpenFailed(a)}if(!this.active)throw new M.TransactionInactive;return pt(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=J(function(i){At(i),r._reject(e.error)}),e.onabort=J(function(i){At(i),r.active&&r._reject(new M.Abort(e.error)),r.active=!1,r.on("abort").fire(i)}),e.oncomplete=J(function(){r.active=!1,r._resolve(),"mutatedParts"in e&&Ve.storagemutated.fire(e.mutatedParts)}),this},t.prototype._promise=function(e,r,n){var a=this;if(e==="readwrite"&&this.mode!=="readwrite")return ae(new M.ReadOnly("Transaction is readonly"));if(!this.active)return ae(new M.TransactionInactive);if(this._locked())return new P(function(l,o){a._blockedFuncs.push([function(){a._promise(e,r,n).then(l,o)},R])});if(n)return Ne(function(){var l=new P(function(o,s){a._lock();var m=r(o,s,a);m&&m.then&&m.then(o,s)});return l.finally(function(){return a._unlock()}),l._lib=!0,l});var i=new P(function(l,o){var s=r(l,o,a);s&&s.then&&s.then(l,o)});return i._lib=!0,i},t.prototype._root=function(){return this.parent?this.parent._root():this},t.prototype.waitFor=function(e){var r=this._root(),n=P.resolve(e);if(r._waitingFor)r._waitingFor=r._waitingFor.then(function(){return n});else{r._waitingFor=n,r._waitingQueue=[];var a=r.idbtrans.objectStore(r.storeNames[0]);(function l(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(a.get(-1/0).onsuccess=l)})()}var i=r._waitingFor;return new P(function(l,o){n.then(function(s){return r._waitingQueue.push(J(l.bind(null,s)))},function(s){return r._waitingQueue.push(J(o.bind(null,s)))}).finally(function(){r._waitingFor===i&&(r._waitingFor=null)})})},t.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new M.Abort))},t.prototype.table=function(e){var r=this._memoizedTables||(this._memoizedTables={});if(he(r,e))return r[e];var n=this.schema[e];if(!n)throw new M.NotFound("Table "+e+" not part of transaction");var a=new this.db.Table(e,n,this);return a.core=this.db.core.table(e),r[e]=a,a},t}();function Tl(t){return Mt(Dl.prototype,function(r,n,a,i,l){var o=this;this.db=t,this.mode=r,this.storeNames=n,this.schema=a,this.chromeTransactionDurability=i,this.idbtrans=null,this.on=Rt(this,"complete","error","abort"),this.parent=l||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new P(function(s,m){o._resolve=s,o._reject=m}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(s){var m=o.active;return o.active=!1,o.on.error.fire(s),o.parent?o.parent._reject(s):m&&o.idbtrans&&o.idbtrans.abort(),ae(s)})})}function Gr(t,e,r,n,a,i,l){return{name:t,keyPath:e,unique:r,multi:n,auto:a,compound:i,src:(r&&!l?"&":"")+(n?"*":"")+(a?"++":"")+ni(e)}}function ni(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function ai(t,e,r){return{name:t,primKey:e,indexes:r,mappedClass:null,idxByName:Ia(r,function(n){return[n.name,n]})}}function Pl(t){return t.length===1?t[0]:t}var St=function(t){try{return t.only([[]]),St=function(){return[[]]},[[]]}catch{return St=function(){return qe},qe}};function Jr(t){return t==null?function(){}:typeof t=="string"?Kl(t):function(e){return Ke(e,t)}}function Kl(t){var e=t.split(".");return e.length===1?function(r){return r[t]}:function(r){return Ke(r,t)}}function On(t){return[].slice.call(t)}var jl=0;function bt(t){return t==null?":id":typeof t=="string"?t:"["+t.join("+")+"]"}function Bl(t,e,r){function n(c,g){var f=On(c.objectStoreNames);return{schema:{name:c.name,tables:f.map(function(d){return g.objectStore(d)}).map(function(d){var p=d.keyPath,x=d.autoIncrement,h=se(p),y=p==null,b={},v={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y,compound:h,keyPath:p,autoIncrement:x,unique:!0,extractKey:Jr(p)},indexes:On(d.indexNames).map(function(w){return d.index(w)}).map(function(w){var _=w.name,D=w.unique,A=w.multiEntry,S=w.keyPath,j=se(S),B={name:_,compound:j,keyPath:S,unique:D,multiEntry:A,extractKey:Jr(S)};return b[bt(S)]=B,B}),getIndexByKeyPath:function(w){return b[bt(w)]}};return b[":id"]=v.primaryKey,p!=null&&(b[bt(p)]=v.primaryKey),v})},hasGetAll:f.length>0&&"getAll"in g.objectStore(f[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function a(c){if(c.type===3)return null;if(c.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var g=c.lower,f=c.upper,d=c.lowerOpen,p=c.upperOpen,x=g===void 0?f===void 0?null:e.upperBound(f,!!p):f===void 0?e.lowerBound(g,!!d):e.bound(g,f,!!d,!!p);return x}function i(c){var g=c.name;function f(x){var h=x.trans,y=x.type,b=x.keys,v=x.values,w=x.range;return new Promise(function(_,D){_=J(_);var A=h.objectStore(g),S=A.keyPath==null,j=y==="put"||y==="add";if(!j&&y!=="delete"&&y!=="deleteRange")throw new Error("Invalid operation type: "+y);var B=(b||v||{length:1}).length;if(b&&v&&b.length!==v.length)throw new Error("Given keys array must have same length as given values array.");if(B===0)return _({numFailures:0,failures:{},results:[],lastResult:void 0});var O,H=[],te=[],C=0,L=function(Ee){++C,At(Ee)};if(y==="deleteRange"){if(w.type===4)return _({numFailures:C,failures:te,results:[],lastResult:void 0});w.type===3?H.push(O=A.clear()):H.push(O=A.delete(a(w)))}else{var q=j?S?[v,b]:[v,null]:[b,null],G=q[0],ge=q[1];if(j)for(var ie=0;ie<B;++ie)H.push(O=ge&&ge[ie]!==void 0?A[y](G[ie],ge[ie]):A[y](G[ie])),O.onerror=L;else for(var ie=0;ie<B;++ie)H.push(O=A[y](G[ie])),O.onerror=L}var le=function(Ee){var gt=Ee.target.result;H.forEach(function(_e,Ft){return _e.error!=null&&(te[Ft]=_e.error)}),_({numFailures:C,failures:te,results:y==="delete"?b:H.map(function(_e){return _e.result}),lastResult:gt})};O.onerror=function(Ee){L(Ee),le(Ee)},O.onsuccess=le})}function d(x){var h=x.trans,y=x.values,b=x.query,v=x.reverse,w=x.unique;return new Promise(function(_,D){_=J(_);var A=b.index,S=b.range,j=h.objectStore(g),B=A.isPrimaryKey?j:j.index(A.name),O=v?w?"prevunique":"prev":w?"nextunique":"next",H=y||!("openKeyCursor"in B)?B.openCursor(a(S),O):B.openKeyCursor(a(S),O);H.onerror=Ae(D),H.onsuccess=J(function(te){var C=H.result;if(!C){_(null);return}C.___id=++jl,C.done=!1;var L=C.continue.bind(C),q=C.continuePrimaryKey;q&&(q=q.bind(C));var G=C.advance.bind(C),ge=function(){throw new Error("Cursor not started")},ie=function(){throw new Error("Cursor not stopped")};C.trans=h,C.stop=C.continue=C.continuePrimaryKey=C.advance=ge,C.fail=J(D),C.next=function(){var le=this,Ee=1;return this.start(function(){return Ee--?le.continue():le.stop()}).then(function(){return le})},C.start=function(le){var Ee=new Promise(function(_e,Ft){_e=J(_e),H.onerror=Ae(Ft),C.fail=Ft,C.stop=function(pi){C.stop=C.continue=C.continuePrimaryKey=C.advance=ie,_e(pi)}}),gt=function(){if(H.result)try{le()}catch(_e){C.fail(_e)}else C.done=!0,C.start=function(){throw new Error("Cursor behind last entry")},C.stop()};return H.onsuccess=J(function(_e){H.onsuccess=gt,gt()}),C.continue=L,C.continuePrimaryKey=q,C.advance=G,gt(),Ee},_(C)},D)})}function p(x){return function(h){return new Promise(function(y,b){y=J(y);var v=h.trans,w=h.values,_=h.limit,D=h.query,A=_===1/0?void 0:_,S=D.index,j=D.range,B=v.objectStore(g),O=S.isPrimaryKey?B:B.index(S.name),H=a(j);if(_===0)return y({result:[]});if(x){var te=w?O.getAll(H,A):O.getAllKeys(H,A);te.onsuccess=function(G){return y({result:G.target.result})},te.onerror=Ae(b)}else{var C=0,L=w||!("openKeyCursor"in O)?O.openCursor(H):O.openKeyCursor(H),q=[];L.onsuccess=function(G){var ge=L.result;if(!ge)return y({result:q});if(q.push(w?ge.value:ge.primaryKey),++C===_)return y({result:q});ge.continue()},L.onerror=Ae(b)}})}}return{name:g,schema:c,mutate:f,getMany:function(x){var h=x.trans,y=x.keys;return new Promise(function(b,v){b=J(b);for(var w=h.objectStore(g),_=y.length,D=new Array(_),A=0,S=0,j,B=function(C){var L=C.target;(D[L._pos]=L.result)!=null,++S===A&&b(D)},O=Ae(v),H=0;H<_;++H){var te=y[H];te!=null&&(j=w.get(y[H]),j._pos=H,j.onsuccess=B,j.onerror=O,++A)}A===0&&b(D)})},get:function(x){var h=x.trans,y=x.key;return new Promise(function(b,v){b=J(b);var w=h.objectStore(g),_=w.get(y);_.onsuccess=function(D){return b(D.target.result)},_.onerror=Ae(v)})},query:p(s),openCursor:d,count:function(x){var h=x.query,y=x.trans,b=h.index,v=h.range;return new Promise(function(w,_){var D=y.objectStore(g),A=b.isPrimaryKey?D:D.index(b.name),S=a(v),j=S?A.count(S):A.count();j.onsuccess=J(function(B){return w(B.target.result)}),j.onerror=Ae(_)})}}}var l=n(t,r),o=l.schema,s=l.hasGetAll,m=o.tables.map(function(c){return i(c)}),u={};return m.forEach(function(c){return u[c.name]=c}),{stack:"dbcore",transaction:t.transaction.bind(t),table:function(c){var g=u[c];if(!g)throw new Error("Table '"+c+"' not found");return u[c]},MIN_KEY:-1/0,MAX_KEY:St(e),schema:o}}function Il(t,e){return e.reduce(function(r,n){var a=n.create;return V(V({},r),a(r))},t)}function Rl(t,e,r,n){var a=r.IDBKeyRange;r.indexedDB;var i=Il(Bl(e,a,n),t.dbcore);return{dbcore:i}}function vn(t,e){var r=t._novip,n=e.db,a=Rl(r._middlewares,n,r._deps,e);r.core=a.dbcore,r.tables.forEach(function(i){var l=i.name;r.core.schema.tables.some(function(o){return o.name===l})&&(i.core=r.core.table(l),r[l]instanceof r.Table&&(r[l].core=i.core))})}function xr(t,e,r,n){var a=t._novip;r.forEach(function(i){var l=n[i];e.forEach(function(o){var s=sn(o,i);(!s||"value"in s&&s.value===void 0)&&(o===a.Transaction.prototype||o instanceof a.Transaction?je(o,i,{get:function(){return this.table(i)},set:function(m){Ka(this,i,{value:m,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new a.Table(i,l))})})}function Zr(t,e){var r=t._novip;e.forEach(function(n){for(var a in n)n[a]instanceof r.Table&&delete n[a]})}function Ml(t,e){return t._cfg.version-e._cfg.version}function Ol(t,e,r,n){var a=t._dbSchema,i=t._createTransaction("readwrite",t._storeNames,a);i.create(r),i._completion.catch(n);var l=i._reject.bind(i),o=R.transless||R;Ne(function(){R.trans=i,R.transless=o,e===0?(ne(a).forEach(function(s){xn(r,s,a[s].primKey,a[s].indexes)}),vn(t,r),P.follow(function(){return t.on.populate.fire(i)}).catch(l)):Fl(t,e,i,r).catch(l)})}function Fl(t,e,r,n){var a=t._novip,i=[],l=a._versions,o=a._dbSchema=yn(a,a.idbdb,n),s=!1,m=l.filter(function(c){return c._cfg.version>=e});m.forEach(function(c){i.push(function(){var g=o,f=c._cfg.dbschema;tn(a,g,n),tn(a,f,n),o=a._dbSchema=f;var d=ii(g,f);d.add.forEach(function(v){xn(n,v[0],v[1].primKey,v[1].indexes)}),d.change.forEach(function(v){if(v.recreate)throw new M.Upgrade("Not yet support for changing primary key");var w=n.objectStore(v.name);v.add.forEach(function(_){return en(w,_)}),v.change.forEach(function(_){w.deleteIndex(_.name),en(w,_)}),v.del.forEach(function(_){return w.deleteIndex(_)})});var p=c._cfg.contentUpgrade;if(p&&c._cfg.version>e){vn(a,n),r._memoizedTables={},s=!0;var x=Ra(f);d.del.forEach(function(v){x[v]=g[v]}),Zr(a,[a.Transaction.prototype]),xr(a,[a.Transaction.prototype],ne(x),x),r.schema=x;var h=mn(p);h&&ct();var y,b=P.follow(function(){if(y=p(r),y&&h){var v=Be.bind(null,null);y.then(v,v)}});return y&&typeof y.then=="function"?P.resolve(y):b.then(function(){return y})}}),i.push(function(g){if(!s||!fl){var f=c._cfg.dbschema;Nl(f,g)}Zr(a,[a.Transaction.prototype]),xr(a,[a.Transaction.prototype],a._storeNames,a._dbSchema),r.schema=a._dbSchema})});function u(){return i.length?P.resolve(i.shift()(r.idbtrans)).then(u):P.resolve()}return u().then(function(){Ll(o,n)})}function ii(t,e){var r={del:[],add:[],change:[]},n;for(n in t)e[n]||r.del.push(n);for(n in e){var a=t[n],i=e[n];if(!a)r.add.push([n,i]);else{var l={name:n,def:i,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(i.primKey.keyPath||"")||a.primKey.auto!==i.primKey.auto&&!Cr)l.recreate=!0,r.change.push(l);else{var o=a.idxByName,s=i.idxByName,m=void 0;for(m in o)s[m]||l.del.push(m);for(m in s){var u=o[m],c=s[m];u?u.src!==c.src&&l.change.push(c):l.add.push(c)}(l.del.length>0||l.add.length>0||l.change.length>0)&&r.change.push(l)}}}return r}function xn(t,e,r,n){var a=t.db.createObjectStore(e,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(function(i){return en(a,i)}),a}function Ll(t,e){ne(t).forEach(function(r){e.db.objectStoreNames.contains(r)||xn(e,r,t[r].primKey,t[r].indexes)})}function Nl(t,e){[].slice.call(e.db.objectStoreNames).forEach(function(r){return t[r]==null&&e.db.deleteObjectStore(r)})}function en(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function yn(t,e,r){var n={},a=_r(e.objectStoreNames,0);return a.forEach(function(i){for(var l=r.objectStore(i),o=l.keyPath,s=Gr(ni(o),o||"",!1,!1,!!l.autoIncrement,o&&typeof o!="string",!0),m=[],u=0;u<l.indexNames.length;++u){var c=l.index(l.indexNames[u]);o=c.keyPath;var g=Gr(c.name,o,!!c.unique,!!c.multiEntry,!1,o&&typeof o!="string",!1);m.push(g)}n[i]=ai(i,s,m)}),n}function zl(t,e,r){var n=t._novip;n.verno=e.version/10;var a=n._dbSchema=yn(n,e,r);n._storeNames=_r(e.objectStoreNames,0),xr(n,[n._allTables],ne(a),a)}function Vl(t,e){var r=yn(t,t.idbdb,e),n=ii(r,t._dbSchema);return!(n.add.length||n.change.some(function(a){return a.add.length||a.change.length}))}function tn(t,e,r){for(var n=t._novip,a=r.db.objectStoreNames,i=0;i<a.length;++i){var l=a[i],o=r.objectStore(l);n._hasGetAll="getAll"in o;for(var s=0;s<o.indexNames.length;++s){var m=o.indexNames[s],u=o.index(m).keyPath,c=typeof u=="string"?u:"["+_r(u).join("+")+"]";if(e[l]){var g=e[l].idxByName[c];g&&(g.name=m,delete e[l].idxByName[c],e[l].idxByName[m]=g)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Q.WorkerGlobalScope&&Q instanceof Q.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function Hl(t){return t.split(",").map(function(e,r){e=e.trim();var n=e.replace(/([&*]|\+\+)/g,""),a=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Gr(n,a||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),se(a),r===0)})}var Ul=function(){function t(){}return t.prototype._parseStoresSpec=function(e,r){ne(e).forEach(function(n){if(e[n]!==null){var a=Hl(e[n]),i=a.shift();if(i.multi)throw new M.Schema("Primary key cannot be multi-valued");a.forEach(function(l){if(l.auto)throw new M.Schema("Only primary key can be marked as autoIncrement (++)");if(!l.keyPath)throw new M.Schema("Index must have a name and cannot be an empty string")}),r[n]=ai(n,i,a)}})},t.prototype.stores=function(e){var r=this.db;this._cfg.storesSource=this._cfg.storesSource?ue(this._cfg.storesSource,e):e;var n=r._versions,a={},i={};return n.forEach(function(l){ue(a,l._cfg.storesSource),i=l._cfg.dbschema={},l._parseStoresSpec(a,i)}),r._dbSchema=i,Zr(r,[r._allTables,r,r.Transaction.prototype]),xr(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],ne(i),i),r._storeNames=ne(i),this},t.prototype.upgrade=function(e){return this._cfg.contentUpgrade=gn(this._cfg.contentUpgrade||X,e),this},t}();function Wl(t){return Mt(Ul.prototype,function(r){this.db=t,this._cfg={version:r,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function bn(t,e){var r=t._dbNamesDB;return r||(r=t._dbNamesDB=new Cn(Er,{addons:[],indexedDB:t,IDBKeyRange:e}),r.version(1).stores({dbnames:"name"})),r.table("dbnames")}function wn(t){return t&&typeof t.databases=="function"}function Yl(t){var e=t.indexedDB,r=t.IDBKeyRange;return wn(e)?Promise.resolve(e.databases()).then(function(n){return n.map(function(a){return a.name}).filter(function(a){return a!==Er})}):bn(e,r).toCollection().primaryKeys()}function ql(t,e){var r=t.indexedDB,n=t.IDBKeyRange;!wn(r)&&e!==Er&&bn(r,n).put({name:e}).catch(X)}function Xl(t,e){var r=t.indexedDB,n=t.IDBKeyRange;!wn(r)&&e!==Er&&bn(r,n).delete(e).catch(X)}function rn(t){return Ne(function(){return R.letThrough=!0,t()})}function Ql(){var t=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!t||!indexedDB.databases)return Promise.resolve();var e;return new Promise(function(r){var n=function(){return indexedDB.databases().finally(r)};e=setInterval(n,100),n()}).finally(function(){return clearInterval(e)})}function Gl(t){var e=t._state,r=t._deps.indexedDB;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(function(){return e.dbOpenError?ae(e.dbOpenError):t});$e&&(e.openCanceller._stackHolder=et()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;var n=e.openCanceller;function a(){if(e.openCanceller!==n)throw new M.DatabaseClosed("db.open() was cancelled")}var i=e.dbReadyResolve,l=null,o=!1;return P.race([n,(typeof navigator=="undefined"?P.resolve():Ql()).then(function(){return new P(function(s,m){if(a(),!r)throw new M.MissingAPI;var u=t.name,c=e.autoSchema?r.open(u):r.open(u,Math.round(t.verno*10));if(!c)throw new M.MissingAPI;c.onerror=Ae(m),c.onblocked=J(t._fireOnBlocked),c.onupgradeneeded=J(function(g){if(l=c.transaction,e.autoSchema&&!t._options.allowEmptyDB){c.onerror=At,l.abort(),c.result.close();var f=r.deleteDatabase(u);f.onsuccess=f.onerror=J(function(){m(new M.NoSuchDatabase("Database "+u+" doesnt exist"))})}else{l.onerror=Ae(m);var d=g.oldVersion>Math.pow(2,62)?0:g.oldVersion;o=d<1,t._novip.idbdb=c.result,Ol(t,d/10,l,m)}},m),c.onsuccess=J(function(){l=null;var g=t._novip.idbdb=c.result,f=_r(g.objectStoreNames);if(f.length>0)try{var d=g.transaction(Pl(f),"readonly");e.autoSchema?zl(t,g,d):(tn(t,t._dbSchema,d),Vl(t,d)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),vn(t,d)}catch{}yt.push(t),g.onversionchange=J(function(p){e.vcFired=!0,t.on("versionchange").fire(p)}),g.onclose=J(function(p){t.on("close").fire(p)}),o&&ql(t._deps,u),s()},m)})})]).then(function(){return a(),e.onReadyBeingFired=[],P.resolve(rn(function(){return t.on.ready.fire(t.vip)})).then(function s(){if(e.onReadyBeingFired.length>0){var m=e.onReadyBeingFired.reduce(gn,X);return e.onReadyBeingFired=[],P.resolve(rn(function(){return m(t.vip)})).then(s)}})}).finally(function(){e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(function(){return t}).catch(function(s){e.dbOpenError=s;try{l&&l.abort()}catch{}return n===e.openCanceller&&t._close(),ae(s)}).finally(function(){e.openComplete=!0,i()})}function nn(t){var e=function(l){return t.next(l)},r=function(l){return t.throw(l)},n=i(e),a=i(r);function i(l){return function(o){var s=l(o),m=s.value;return s.done?m:!m||typeof m.then!="function"?se(m)?Promise.all(m).then(n,a):n(m):m.then(n,a)}}return i(e)()}function Jl(t,e,r){var n=arguments.length;if(n<2)throw new M.InvalidArgument("Too few arguments");for(var a=new Array(n-1);--n;)a[n-1]=arguments[n];r=a.pop();var i=Ma(a);return[t,i,r]}function li(t,e,r,n,a){return P.resolve().then(function(){var i=R.transless||R,l=t._createTransaction(e,r,t._dbSchema,n),o={trans:l,transless:i};if(n)l.idbtrans=n.idbtrans;else try{l.create(),t._state.PR1398_maxLoop=3}catch(c){return c.name===un.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(function(){return li(t,e,r,null,a)})):ae(c)}var s=mn(a);s&&ct();var m,u=P.follow(function(){if(m=a.call(l,l),m)if(s){var c=Be.bind(null,null);m.then(c,c)}else typeof m.next=="function"&&typeof m.throw=="function"&&(m=nn(m))},o);return(m&&typeof m.then=="function"?P.resolve(m).then(function(c){return l.active?c:ae(new M.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):u.then(function(){return m})).then(function(c){return n&&l._resolve(),l._completion.then(function(){return c})}).catch(function(c){return l._reject(c),ae(c)})})}function qt(t,e,r){for(var n=se(t)?t.slice():[t],a=0;a<r;++a)n.push(e);return n}function Zl(t){return V(V({},t),{table:function(e){var r=t.table(e),n=r.schema,a={},i=[];function l(p,x,h){var y=bt(p),b=a[y]=a[y]||[],v=p==null?0:typeof p=="string"?1:p.length,w=x>0,_=V(V({},h),{isVirtual:w,keyTail:x,keyLength:v,extractKey:Jr(p),unique:!w&&h.unique});if(b.push(_),_.isPrimaryKey||i.push(_),v>1){var D=v===2?p[0]:p.slice(0,v-1);l(D,x+1,h)}return b.sort(function(A,S){return A.keyTail-S.keyTail}),_}var o=l(n.primaryKey.keyPath,0,n.primaryKey);a[":id"]=[o];for(var s=0,m=n.indexes;s<m.length;s++){var u=m[s];l(u.keyPath,0,u)}function c(p){var x=a[bt(p)];return x&&x[0]}function g(p,x){return{type:p.type===1?2:p.type,lower:qt(p.lower,p.lowerOpen?t.MAX_KEY:t.MIN_KEY,x),lowerOpen:!0,upper:qt(p.upper,p.upperOpen?t.MIN_KEY:t.MAX_KEY,x),upperOpen:!0}}function f(p){var x=p.query.index;return x.isVirtual?V(V({},p),{query:{index:x,range:g(p.query.range,x.keyTail)}}):p}var d=V(V({},r),{schema:V(V({},n),{primaryKey:o,indexes:i,getIndexByKeyPath:c}),count:function(p){return r.count(f(p))},query:function(p){return r.query(f(p))},openCursor:function(p){var x=p.query.index,h=x.keyTail,y=x.isVirtual,b=x.keyLength;if(!y)return r.openCursor(p);function v(w){function _(A){A!=null?w.continue(qt(A,p.reverse?t.MAX_KEY:t.MIN_KEY,h)):p.unique?w.continue(w.key.slice(0,b).concat(p.reverse?t.MIN_KEY:t.MAX_KEY,h)):w.continue()}var D=Object.create(w,{continue:{value:_},continuePrimaryKey:{value:function(A,S){w.continuePrimaryKey(qt(A,t.MAX_KEY,h),S)}},primaryKey:{get:function(){return w.primaryKey}},key:{get:function(){var A=w.key;return b===1?A[0]:A.slice(0,b)}},value:{get:function(){return w.value}}});return D}return r.openCursor(f(p)).then(function(w){return w&&v(w)})}});return d}})}var eo={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Zl};function _n(t,e,r,n){return r=r||{},n=n||"",ne(t).forEach(function(a){if(!he(e,a))r[n+a]=void 0;else{var i=t[a],l=e[a];if(typeof i=="object"&&typeof l=="object"&&i&&l){var o=Or(i),s=Or(l);o!==s?r[n+a]=e[a]:o==="Object"?_n(i,l,r,n+a+"."):i!==l&&(r[n+a]=e[a])}else i!==l&&(r[n+a]=e[a])}}),ne(e).forEach(function(a){he(t,a)||(r[n+a]=e[a])}),r}function to(t,e){return e.type==="delete"?e.keys:e.keys||e.values.map(t.extractKey)}var ro={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(t){return V(V({},t),{table:function(e){var r=t.table(e),n=r.schema.primaryKey,a=V(V({},r),{mutate:function(i){var l=R.trans,o=l.table(e).hook,s=o.deleting,m=o.creating,u=o.updating;switch(i.type){case"add":if(m.fire===X)break;return l._promise("readwrite",function(){return c(i)},!0);case"put":if(m.fire===X&&u.fire===X)break;return l._promise("readwrite",function(){return c(i)},!0);case"delete":if(s.fire===X)break;return l._promise("readwrite",function(){return c(i)},!0);case"deleteRange":if(s.fire===X)break;return l._promise("readwrite",function(){return g(i)},!0)}return r.mutate(i);function c(d){var p=R.trans,x=d.keys||to(n,d);if(!x)throw new Error("Keys missing");return d=d.type==="add"||d.type==="put"?V(V({},d),{keys:x}):V({},d),d.type!=="delete"&&(d.values=Rr([],d.values,!0)),d.keys&&(d.keys=Rr([],d.keys,!0)),no(r,d,x).then(function(h){var y=x.map(function(b,v){var w=h[v],_={onerror:null,onsuccess:null};if(d.type==="delete")s.fire.call(_,b,w,p);else if(d.type==="add"||w===void 0){var D=m.fire.call(_,b,d.values[v],p);b==null&&D!=null&&(b=D,d.keys[v]=b,n.outbound||ke(d.values[v],n.keyPath,b))}else{var A=_n(w,d.values[v]),S=u.fire.call(_,A,b,w,p);if(S){var j=d.values[v];Object.keys(S).forEach(function(B){he(j,B)?j[B]=S[B]:ke(j,B,S[B])})}}return _});return r.mutate(d).then(function(b){for(var v=b.failures,w=b.results,_=b.numFailures,D=b.lastResult,A=0;A<x.length;++A){var S=w?w[A]:x[A],j=y[A];S==null?j.onerror&&j.onerror(v[A]):j.onsuccess&&j.onsuccess(d.type==="put"&&h[A]?d.values[A]:S)}return{failures:v,results:w,numFailures:_,lastResult:D}}).catch(function(b){return y.forEach(function(v){return v.onerror&&v.onerror(b)}),Promise.reject(b)})})}function g(d){return f(d.trans,d.range,1e4)}function f(d,p,x){return r.query({trans:d,values:!1,query:{index:n,range:p},limit:x}).then(function(h){var y=h.result;return c({type:"delete",keys:y,trans:d}).then(function(b){return b.numFailures>0?Promise.reject(b.failures[0]):y.length<x?{failures:[],numFailures:0,lastResult:void 0}:f(d,V(V({},p),{lower:y[y.length-1],lowerOpen:!0}),x)})})}}});return a}})}};function no(t,e,r){return e.type==="add"?Promise.resolve([]):t.getMany({trans:e.trans,keys:r,cache:"immutable"})}function oi(t,e,r){try{if(!e||e.keys.length<t.length)return null;for(var n=[],a=0,i=0;a<e.keys.length&&i<t.length;++a)ce(e.keys[a],t[i])===0&&(n.push(r?Kt(e.values[a]):e.values[a]),++i);return n.length===t.length?n:null}catch{return null}}var ao={stack:"dbcore",level:-1,create:function(t){return{table:function(e){var r=t.table(e);return V(V({},r),{getMany:function(n){if(!n.cache)return r.getMany(n);var a=oi(n.keys,n.trans._cache,n.cache==="clone");return a?P.resolve(a):r.getMany(n).then(function(i){return n.trans._cache={keys:n.keys,values:n.cache==="clone"?Kt(i):i},i})},mutate:function(n){return n.type!=="add"&&(n.trans._cache=null),r.mutate(n)}})}}}},jr;function kn(t){return!("from"in t)}var De=function(t,e){if(this)ue(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0});else{var r=new De;return t&&"d"in t&&ue(r,t),r}};ot(De.prototype,(jr={add:function(t){return yr(this,t),this},addKey:function(t){return Dt(this,t,t),this},addKeys:function(t){var e=this;return t.forEach(function(r){return Dt(e,r,r)}),this}},jr[Fr]=function(){return an(this)},jr));function Dt(t,e,r){var n=ce(e,r);if(!isNaN(n)){if(n>0)throw RangeError();if(kn(t))return ue(t,{from:e,to:r,d:1});var a=t.l,i=t.r;if(ce(r,t.from)<0)return a?Dt(a,e,r):t.l={from:e,to:r,d:1,l:null,r:null},Fn(t);if(ce(e,t.to)>0)return i?Dt(i,e,r):t.r={from:e,to:r,d:1,l:null,r:null},Fn(t);ce(e,t.from)<0&&(t.from=e,t.l=null,t.d=i?i.d+1:1),ce(r,t.to)>0&&(t.to=r,t.r=null,t.d=t.l?t.l.d+1:1);var l=!t.r;a&&!t.l&&yr(t,a),i&&l&&yr(t,i)}}function yr(t,e){function r(n,a){var i=a.from,l=a.to,o=a.l,s=a.r;Dt(n,i,l),o&&r(n,o),s&&r(n,s)}kn(e)||r(t,e)}function io(t,e){var r=an(e),n=r.next();if(n.done)return!1;for(var a=n.value,i=an(t),l=i.next(a.from),o=l.value;!n.done&&!l.done;){if(ce(o.from,a.to)<=0&&ce(o.to,a.from)>=0)return!0;ce(a.from,o.from)<0?a=(n=r.next(o.from)).value:o=(l=i.next(a.from)).value}return!1}function an(t){var e=kn(t)?null:{s:0,n:t};return{next:function(r){for(var n=arguments.length>0;e;)switch(e.s){case 0:if(e.s=1,n)for(;e.n.l&&ce(r,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!n||ce(r,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Fn(t){var e,r,n=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((r=t.l)===null||r===void 0?void 0:r.d)||0),a=n>1?"r":n<-1?"l":"";if(a){var i=a==="r"?"l":"r",l=V({},t),o=t[a];t.from=o.from,t.to=o.to,t[a]=o[a],l[a]=o[i],t[i]=l,l.d=Ln(l)}t.d=Ln(t)}function Ln(t){var e=t.r,r=t.l;return(e?r?Math.max(e.d,r.d):e.d:r?r.d:0)+1}var lo={stack:"dbcore",level:0,create:function(t){var e=t.schema.name,r=new De(t.MIN_KEY,t.MAX_KEY);return V(V({},t),{table:function(n){var a=t.table(n),i=a.schema,l=i.primaryKey,o=l.extractKey,s=l.outbound,m=V(V({},a),{mutate:function(g){var f=g.trans,d=f.mutatedParts||(f.mutatedParts={}),p=function(D){var A="idb://"+e+"/"+n+"/"+D;return d[A]||(d[A]=new De)},x=p(""),h=p(":dels"),y=g.type,b=g.type==="deleteRange"?[g.range]:g.type==="delete"?[g.keys]:g.values.length<50?[[],g.values]:[],v=b[0],w=b[1],_=g.trans._cache;return a.mutate(g).then(function(D){if(se(v)){y!=="delete"&&(v=D.results),x.addKeys(v);var A=oi(v,_);!A&&y!=="add"&&h.addKeys(v),(A||w)&&oo(p,i,A,w)}else if(v){var S={from:v.lower,to:v.upper};h.add(S),x.add(S)}else x.add(r),h.add(r),i.indexes.forEach(function(j){return p(j.name).add(r)});return D})}}),u=function(g){var f,d,p=g.query,x=p.index,h=p.range;return[x,new De((f=h.lower)!==null&&f!==void 0?f:t.MIN_KEY,(d=h.upper)!==null&&d!==void 0?d:t.MAX_KEY)]},c={get:function(g){return[l,new De(g.key)]},getMany:function(g){return[l,new De().addKeys(g.keys)]},count:u,query:u,openCursor:u};return ne(c).forEach(function(g){m[g]=function(f){var d=R.subscr;if(d){var p=function(_){var D="idb://"+e+"/"+n+"/"+_;return d[D]||(d[D]=new De)},x=p(""),h=p(":dels"),y=c[g](f),b=y[0],v=y[1];if(p(b.name||"").add(v),!b.isPrimaryKey)if(g==="count")h.add(r);else{var w=g==="query"&&s&&f.values&&a.query(V(V({},f),{values:!1}));return a[g].apply(this,arguments).then(function(_){if(g==="query"){if(s&&f.values)return w.then(function(j){var B=j.result;return x.addKeys(B),_});var D=f.values?_.result.map(o):_.result;f.values?x.addKeys(D):h.addKeys(D)}else if(g==="openCursor"){var A=_,S=f.values;return A&&Object.create(A,{key:{get:function(){return h.addKey(A.primaryKey),A.key}},primaryKey:{get:function(){var j=A.primaryKey;return h.addKey(j),j}},value:{get:function(){return S&&x.addKey(A.primaryKey),A.value}}})}return _})}}return a[g].apply(this,arguments)}}),m}})}};function oo(t,e,r,n){function a(i){var l=t(i.name||"");function o(m){return m!=null?i.extractKey(m):null}var s=function(m){return i.multiEntry&&se(m)?m.forEach(function(u){return l.addKey(u)}):l.addKey(m)};(r||n).forEach(function(m,u){var c=r&&o(r[u]),g=n&&o(n[u]);ce(c,g)!==0&&(c!=null&&s(c),g!=null&&s(g))})}e.indexes.forEach(a)}var Cn=function(){function t(e,r){var n=this;this._middlewares={},this.verno=0;var a=t.dependencies;this._options=r=V({addons:t.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};var i=r.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:X,dbReadyPromise:null,cancelOpen:X,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};l.dbReadyPromise=new P(function(o){l.dbReadyResolve=o}),l.openCanceller=new P(function(o,s){l.cancelOpen=s}),this._state=l,this.name=e,this.on=Rt(this,"populate","blocked","versionchange","close",{ready:[gn,X]}),this.on.ready.subscribe=ja(this.on.ready.subscribe,function(o){return function(s,m){t.vip(function(){var u=n._state;if(u.openComplete)u.dbOpenError||P.resolve().then(s),m&&o(s);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(s),m&&o(s);else{o(s);var c=n;m||o(function g(){c.on.ready.unsubscribe(s),c.on.ready.unsubscribe(g)})}})}}),this.Collection=_l(this),this.Table=vl(this),this.Transaction=Tl(this),this.Version=Wl(this),this.WhereClause=Sl(this),this.on("versionchange",function(o){o.newVersion>0?console.warn("Another connection wants to upgrade database '"+n.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+n.name+"'. Closing db now to resume the delete request."),n.close()}),this.on("blocked",function(o){!o.newVersion||o.newVersion<o.oldVersion?console.warn("Dexie.delete('"+n.name+"') was blocked"):console.warn("Upgrade '"+n.name+"' blocked by other connection holding version "+o.oldVersion/10)}),this._maxKey=St(r.IDBKeyRange),this._createTransaction=function(o,s,m,u){return new n.Transaction(o,s,m,n._options.chromeTransactionDurability,u)},this._fireOnBlocked=function(o){n.on("blocked").fire(o),yt.filter(function(s){return s.name===n.name&&s!==n&&!s._state.vcFired}).map(function(s){return s.on("versionchange").fire(o)})},this.use(eo),this.use(ro),this.use(lo),this.use(ao),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(function(o){return o(n)})}return t.prototype.version=function(e){if(isNaN(e)||e<.1)throw new M.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new M.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var r=this._versions,n=r.filter(function(a){return a._cfg.version===e})[0];return n||(n=new this.Version(e),r.push(n),r.sort(Ml),n.stores({}),this._state.autoSchema=!1,n)},t.prototype._whenReady=function(e){var r=this;return this.idbdb&&(this._state.openComplete||R.letThrough||this._vip)?e():new P(function(n,a){if(r._state.openComplete)return a(new M.DatabaseClosed(r._state.dbOpenError));if(!r._state.isBeingOpened){if(!r._options.autoOpen){a(new M.DatabaseClosed);return}r.open().catch(X)}r._state.dbReadyPromise.then(n,a)}).then(e)},t.prototype.use=function(e){var r=e.stack,n=e.create,a=e.level,i=e.name;i&&this.unuse({stack:r,name:i});var l=this._middlewares[r]||(this._middlewares[r]=[]);return l.push({stack:r,create:n,level:a==null?10:a,name:i}),l.sort(function(o,s){return o.level-s.level}),this},t.prototype.unuse=function(e){var r=e.stack,n=e.name,a=e.create;return r&&this._middlewares[r]&&(this._middlewares[r]=this._middlewares[r].filter(function(i){return a?i.create!==a:n?i.name!==n:!1})),this},t.prototype.open=function(){return Gl(this)},t.prototype._close=function(){var e=this._state,r=yt.indexOf(this);if(r>=0&&yt.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new P(function(n){e.dbReadyResolve=n}),e.openCanceller=new P(function(n,a){e.cancelOpen=a})},t.prototype.close=function(){this._close();var e=this._state;this._options.autoOpen=!1,e.dbOpenError=new M.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)},t.prototype.delete=function(){var e=this,r=arguments.length>0,n=this._state;return new P(function(a,i){var l=function(){e.close();var o=e._deps.indexedDB.deleteDatabase(e.name);o.onsuccess=J(function(){Xl(e._deps,e.name),a()}),o.onerror=Ae(i),o.onblocked=e._fireOnBlocked};if(r)throw new M.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(l):l()})},t.prototype.backendDB=function(){return this.idbdb},t.prototype.isOpen=function(){return this.idbdb!==null},t.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},t.prototype.hasFailed=function(){return this._state.dbOpenError!==null},t.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(t.prototype,"tables",{get:function(){var e=this;return ne(this._allTables).map(function(r){return e._allTables[r]})},enumerable:!1,configurable:!0}),t.prototype.transaction=function(){var e=Jl.apply(this,arguments);return this._transaction.apply(this,e)},t.prototype._transaction=function(e,r,n){var a=this,i=R.trans;(!i||i.db!==this||e.indexOf("!")!==-1)&&(i=null);var l=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var o,s;try{if(s=r.map(function(u){var c=u instanceof a.Table?u.name:u;if(typeof c!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return c}),e=="r"||e===Sr)o=Sr;else if(e=="rw"||e==Dr)o=Dr;else throw new M.InvalidArgument("Invalid transaction mode: "+e);if(i){if(i.mode===Sr&&o===Dr)if(l)i=null;else throw new M.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i&&s.forEach(function(u){if(i&&i.storeNames.indexOf(u)===-1)if(l)i=null;else throw new M.SubTransaction("Table "+u+" not included in parent transaction.")}),l&&i&&!i.active&&(i=null)}}catch(u){return i?i._promise(null,function(c,g){g(u)}):ae(u)}var m=li.bind(null,this,o,s,i,n);return i?i._promise(o,m,"lock"):R.trans?ut(R.transless,function(){return a._whenReady(m)}):this._whenReady(m)},t.prototype.table=function(e){if(!he(this._allTables,e))throw new M.InvalidTable("Table "+e+" does not exist");return this._allTables[e]},t}(),so=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",mo=function(){function t(e){this._subscribe=e}return t.prototype.subscribe=function(e,r,n){return this._subscribe(!e||typeof e=="function"?{next:e,error:r,complete:n}:e)},t.prototype[so]=function(){return this},t}();function si(t,e){return ne(e).forEach(function(r){var n=t[r]||(t[r]=new De);yr(n,e[r])}),t}function Ot(t){return new mo(function(e){var r=mn(t);function n(f){r&&ct();var d=function(){return Ne(t,{subscr:f,trans:null})},p=R.trans?ut(R.transless,d):d();return r&&p.then(Be,Be),p}var a=!1,i={},l={},o={get closed(){return a},unsubscribe:function(){a=!0,Ve.storagemutated.unsubscribe(c)}};e.start&&e.start(o);var s=!1,m=!1;function u(){return ne(l).some(function(f){return i[f]&&io(i[f],l[f])})}var c=function(f){si(i,f),u()&&g()},g=function(){if(!(s||a)){i={};var f={},d=n(f);m||(Ve($t,c),m=!0),s=!0,Promise.resolve(d).then(function(p){s=!1,!a&&(u()?g():(i={},l=f,e.next&&e.next(p)))},function(p){s=!1,e.error&&e.error(p),o.unsubscribe()})}};return g(),o})}var ln;try{ln={indexedDB:Q.indexedDB||Q.mozIndexedDB||Q.webkitIndexedDB||Q.msIndexedDB,IDBKeyRange:Q.IDBKeyRange||Q.webkitIDBKeyRange}}catch{ln={indexedDB:null,IDBKeyRange:null}}var We=Cn;ot(We,V(V({},kr),{delete:function(t){var e=new We(t,{addons:[]});return e.delete()},exists:function(t){return new We(t,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(t){try{return Yl(We.dependencies).then(t)}catch{return ae(new M.MissingAPI)}},defineClass:function(){function t(e){ue(this,e)}return t},ignoreTransaction:function(t){return R.trans?ut(R.transless,t):t()},vip:rn,async:function(t){return function(){try{var e=nn(t.apply(this,arguments));return!e||typeof e.then!="function"?P.resolve(e):e}catch(r){return ae(r)}}},spawn:function(t,e,r){try{var n=nn(t.apply(r,e||[]));return!n||typeof n.then!="function"?P.resolve(n):n}catch(a){return ae(a)}},currentTransaction:{get:function(){return R.trans||null}},waitFor:function(t,e){var r=P.resolve(typeof t=="function"?We.ignoreTransaction(t):t).timeout(e||6e4);return R.trans?R.trans.waitFor(r):r},Promise:P,debug:{get:function(){return $e},set:function(t){Fa(t,t==="dexie"?function(){return!0}:Za)}},derive:st,extend:ue,props:ot,override:ja,Events:Rt,on:Ve,liveQuery:Ot,extendObservabilitySet:si,getByKeyPath:Ke,setByKeyPath:ke,delByKeyPath:zi,shallowClone:Ra,deepClone:Kt,getObjectDiff:_n,cmp:ce,asap:Ba,minKey:Qr,addons:[],connections:yt,errnames:un,dependencies:ln,semVer:jn,version:jn.split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,r){return t+e/Math.pow(10,r*2)})}));We.maxKey=St(We.dependencies.IDBKeyRange);typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(Ve($t,function(t){if(!Pe){var e;Cr?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Fe,!0,!0,t)):e=new CustomEvent(Fe,{detail:t}),Pe=!0,dispatchEvent(e),Pe=!1}}),addEventListener(Fe,function(t){var e=t.detail;Pe||br(e)}));function br(t){var e=Pe;try{Pe=!0,Ve.storagemutated.fire(t)}finally{Pe=e}}var Pe=!1;if(typeof BroadcastChannel!="undefined"){var Nn=new BroadcastChannel(Fe);Ve($t,function(t){Pe||Nn.postMessage(t)}),Nn.onmessage=function(t){t.data&&br(t.data)}}else if(typeof self!="undefined"&&typeof navigator!="undefined"){Ve($t,function(t){try{Pe||(typeof localStorage!="undefined"&&localStorage.setItem(Fe,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&Rr([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(e){return e.postMessage({type:Fe,changedParts:t})}))}catch{}}),typeof addEventListener!="undefined"&&addEventListener("storage",function(t){if(t.key===Fe){var e=JSON.parse(t.newValue);e&&br(e.changedParts)}});var zn=self.document&&navigator.serviceWorker;zn&&zn.addEventListener("message",co)}function co(t){var e=t.data;e&&e.type===Fe&&br(e.changedParts)}P.rejectionMapper=Gi;Fa($e,Za);const uo=t=>({}),Vn=t=>({}),go=t=>({}),Hn=t=>({});function fo(t){let e,r,n,a,i,l,o,s,m;return{c(){e=$("div"),r=$("div"),n=$("b"),a=Ie(t[0]),i=I(),l=$("div"),o=$("button"),o.textContent="\xD7",E(n,"class","modal-title svelte-1ly2zrb"),E(r,"class","col ai-center pl-1"),E(o,"class","close-btn svelte-1ly2zrb"),E(l,"class","col-auto"),E(e,"class","row p-3")},m(u,c){z(u,e,c),k(e,r),k(r,n),k(n,a),k(e,i),k(e,l),k(l,o),s||(m=F(o,"click",t[2]),s=!0)},p(u,c){c&1&&Pt(a,u[0])},d(u){u&&N(e),s=!1,m()}}}function po(t){let e;return{c(){e=$("span"),e.textContent="Modal body"},m(r,n){z(r,e,n)},p:Z,d(r){r&&N(e)}}}function Un(t){let e,r;const n=t[6].footer,a=ar(n,t,t[5],Vn);return{c(){e=$("div"),a&&a.c(),E(e,"class","modal-footer")},m(i,l){z(i,e,l),a&&a.m(e,null),r=!0},p(i,l){a&&a.p&&(!r||l&32)&&lr(a,n,i,i[5],r?ir(n,i[5],l,uo):or(i[5]),Vn)},i(i){r||(T(a,i),r=!0)},o(i){K(a,i),r=!1},d(i){i&&N(e),a&&a.d(i)}}}function ho(t){let e,r,n,a,i,l,o;const s=t[6].header,m=ar(s,t,t[5],Hn),u=m||fo(t),c=t[6].default,g=ar(c,t,t[5],null),f=g||po();let d=t[4].footer&&Un(t),p=[t[3],{class:"ayo-modal"}],x={};for(let h=0;h<p.length;h+=1)x=Ge(x,p[h]);return{c(){e=$("div"),r=$("div"),n=$("div"),u&&u.c(),a=I(),i=$("div"),f&&f.c(),l=I(),d&&d.c(),E(n,"class","modal-header"),E(i,"class","modal-body svelte-1ly2zrb"),$n(r,x),Oe(r,"svelte-1ly2zrb",!0),E(e,"class","ayo-modal-backdrop svelte-1ly2zrb")},m(h,y){z(h,e,y),k(e,r),k(r,n),u&&u.m(n,null),k(r,a),k(r,i),f&&f.m(i,null),k(r,l),d&&d.m(r,null),t[7](e),o=!0},p(h,[y]){m?m.p&&(!o||y&32)&&lr(m,s,h,h[5],o?ir(s,h[5],y,go):or(h[5]),Hn):u&&u.p&&(!o||y&1)&&u.p(h,o?y:-1),g&&g.p&&(!o||y&32)&&lr(g,c,h,h[5],o?ir(c,h[5],y,null):or(h[5]),null),h[4].footer?d?(d.p(h,y),y&16&&T(d,1)):(d=Un(h),d.c(),T(d,1),d.m(r,null)):d&&(fe(),K(d,1,1,()=>{d=null}),pe()),$n(r,x=Da(p,[y&8&&h[3],{class:"ayo-modal"}])),Oe(r,"svelte-1ly2zrb",!0)},i(h){o||(T(u,h),T(f,h),T(d),o=!0)},o(h){K(u,h),K(f,h),K(d),o=!1},d(h){h&&N(e),u&&u.d(h),f&&f.d(h),d&&d.d(),t[7](null)}}}function vo(t,e,r){const n=["title"];let a=sr(e,n),{$$slots:i={},$$scope:l}=e;const o=yi(i);let s;const m=He();Ki(()=>{document.body.appendChild(s)});let{title:u="Modal"}=e;const c=()=>{m("close")};function g(f){we[f?"unshift":"push"](()=>{s=f,r(1,s)})}return t.$$set=f=>{e=Ge(Ge({},e),pa(f)),r(3,a=sr(e,n)),"title"in f&&r(0,u=f.title),"$$scope"in f&&r(5,l=f.$$scope)},[u,s,c,a,o,l,i,g]}class tt extends ye{constructor(e){super(),xe(this,e,vo,ho,ve,{title:0})}}const ee=new Cn("ayoBDB");ee.version(1).stores({categories:"++id, title, position",bookmarks:"++id, category, position"});function xo(t){let e,r,n,a,i,l,o,s,m,u,c;return{c(){e=$("form"),r=$("label"),r.textContent="Name",n=I(),a=$("input"),i=I(),l=$("div"),o=$("button"),o.textContent="Cancel",s=I(),m=$("button"),m.textContent="Add",E(r,"for","new-category-name"),E(a,"type","text"),E(a,"id","new-category-name"),E(a,"class","input"),a.required=!0,E(o,"class","btn text"),E(o,"type","button"),E(m,"class","btn green"),E(l,"class","ta-right mt-3")},m(g,f){z(g,e,f),k(e,r),k(e,n),k(e,a),be(a,t[0]),k(e,i),k(e,l),k(l,o),k(l,s),k(l,m),u||(c=[F(a,"input",t[3]),F(o,"click",Le(re(t[4]))),F(e,"submit",re(t[2]))],u=!0)},p(g,f){f&1&&a.value!==g[0]&&be(a,g[0])},d(g){g&&N(e),u=!1,me(c)}}}function yo(t){let e,r;return e=new tt({props:{title:"Add Category",$$slots:{default:[xo]},$$scope:{ctx:t}}}),e.$on("close",t[5]),{c(){Y(e.$$.fragment)},m(n,a){U(e,n,a),r=!0},p(n,[a]){const i={};a&65&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){r||(T(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function bo(t,e,r){const n=He();let a="";const i=async()=>{const m=await ee.table("categories").orderBy("position").last(),u=m?m.position+1:1;await ee.table("categories").add({title:a,position:u}),r(0,a=""),n("close")};function l(){a=this.value,r(0,a)}const o=()=>n("close");function s(m){Ue.call(this,t,m)}return[a,n,i,l,o,s]}class wo extends ye{constructor(e){super(),xe(this,e,bo,yo,ve,{})}}function Wn(t){let e,r;const n=t[5].default,a=ar(n,t,t[4],null);return{c(){e=$("div"),a&&a.c(),E(e,"class","ctx-menu svelte-b5e42p")},m(i,l){z(i,e,l),a&&a.m(e,null),t[6](e),r=!0},p(i,l){a&&a.p&&(!r||l&16)&&lr(a,n,i,i[4],r?ir(n,i[4],l,null):or(i[4]),null)},i(i){r||(T(a,i),r=!0)},o(i){K(a,i),r=!1},d(i){i&&N(e),a&&a.d(i),t[6](null)}}}function _o(t){let e,r,n=t[0]&&Wn(t);return{c(){n&&n.c(),e=Tt()},m(a,i){n&&n.m(a,i),z(a,e,i),r=!0},p(a,[i]){a[0]?n?(n.p(a,i),i&1&&T(n,1)):(n=Wn(a),n.c(),T(n,1),n.m(e.parentNode,e)):n&&(fe(),K(n,1,1,()=>{n=null}),pe())},i(a){r||(T(n),r=!0)},o(a){K(n),r=!1},d(a){n&&n.d(a),a&&N(e)}}}function ko(t,e,r){let{$$slots:n={},$$scope:a}=e,i=!1,l;const o=c=>{l&&(c.target.isSameNode(l)||!l.contains(c.target))&&(window.removeEventListener("pointerdown",o),r(0,i=!1))},s=()=>{r(0,i=!1)},m=async c=>{c.preventDefault(),r(0,i=!0),await ji(),c.y+l.clientHeight<innerHeight?r(1,l.style.top=c.pageY+"px",l):r(1,l.style.top=c.pageY-l.clientHeight+"px",l),c.x+l.clientWidth<innerWidth?r(1,l.style.left=c.pageX+"px",l):r(1,l.style.left=c.pageX-l.clientWidth+"px",l),document.body.appendChild(l),window.addEventListener("pointerdown",o)};function u(c){we[c?"unshift":"push"](()=>{l=c,r(1,l)})}return t.$$set=c=>{"$$scope"in c&&r(4,a=c.$$scope)},[i,l,s,m,a,n,u]}class mi extends ye{constructor(e){super(),xe(this,e,ko,_o,ve,{close:2,open:3})}get close(){return this.$$.ctx[2]}get open(){return this.$$.ctx[3]}}function Co(t){let e,r,n,a,i,l,o,s,m,u,c;return{c(){e=$("form"),r=$("label"),r.textContent="Name",n=I(),a=$("input"),i=I(),l=$("div"),o=$("button"),o.textContent="Cancel",s=I(),m=$("button"),m.textContent="Save",E(r,"for","new-category-name"),E(a,"type","text"),E(a,"id","new-category-name"),E(a,"class","input"),E(o,"class","btn text"),E(o,"type","button"),E(m,"class","btn green"),E(l,"class","ta-right mt-3")},m(g,f){z(g,e,f),k(e,r),k(e,n),k(e,a),be(a,t[0].title),k(e,i),k(e,l),k(l,o),k(l,s),k(l,m),u||(c=[F(a,"input",t[4]),F(o,"click",Le(re(t[5]))),F(e,"submit",re(t[2]))],u=!0)},p(g,f){f&1&&a.value!==g[0].title&&be(a,g[0].title)},d(g){g&&N(e),u=!1,me(c)}}}function Eo(t){let e,r;return e=new tt({props:{title:"Update category",$$slots:{default:[Co]},$$scope:{ctx:t}}}),e.$on("close",t[6]),{c(){Y(e.$$.fragment)},m(n,a){U(e,n,a),r=!0},p(n,[a]){const i={};a&129&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){r||(T(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Ao(t,e,r){let{category:n={}}=e,a={...n};const i=He(),l=async()=>{await ee.table("categories").put(a),i("close")};function o(){a.title=this.value,r(0,a)}const s=()=>i("close");function m(u){Ue.call(this,t,u)}return t.$$set=u=>{"category"in u&&r(3,n=u.category)},[a,i,l,n,o,s,m]}class $o extends ye{constructor(e){super(),xe(this,e,Ao,Eo,ve,{category:3})}}function So(t){let e,r,n=[{viewBox:"0 0 24 24"},t[2]],a={};for(let i=0;i<n.length;i+=1)a=Ge(a,n[i]);return{c(){e=An("svg"),r=An("path"),E(r,"fill","currentColor"),E(r,"d",t[0]),Sn(e,a),dt(e,"height",t[1],!1),dt(e,"width",t[1],!1)},m(i,l){z(i,e,l),k(e,r)},p(i,[l]){l&1&&E(r,"d",i[0]),Sn(e,a=Da(n,[{viewBox:"0 0 24 24"},l&4&&i[2]])),dt(e,"height",i[1],!1),dt(e,"width",i[1],!1)},i:Z,o:Z,d(i){i&&N(e)}}}function Do(t,e,r){const n=["icon","size"];let a=sr(e,n),{icon:i}=e,{size:l="1rem"}=e;return t.$$set=o=>{e=Ge(Ge({},e),pa(o)),r(2,a=sr(e,n)),"icon"in o&&r(0,i=o.icon),"size"in o&&r(1,l=o.size)},[i,l,a]}class Ce extends ye{constructor(e){super(),xe(this,e,Do,So,ve,{icon:0,size:1})}}var ci="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",ui="M19.39 10.74L11 19.13V22H6C4.89 22 4 21.11 4 20V4C4 2.9 4.89 2 6 2H7V9L9.5 7.5L12 9V2H18C19.1 2 20 2.89 20 4V10.3C19.78 10.42 19.57 10.56 19.39 10.74M13 19.96V22H15.04L21.17 15.88L19.13 13.83L13 19.96M22.85 13.47L21.53 12.15C21.33 11.95 21 11.95 20.81 12.15L19.83 13.13L21.87 15.17L22.85 14.19C23.05 14 23.05 13.67 22.85 13.47Z",To="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",gi="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",di="M16,12A2,2 0 0,1 18,10A2,2 0 0,1 20,12A2,2 0 0,1 18,14A2,2 0 0,1 16,12M10,12A2,2 0 0,1 12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12M4,12A2,2 0 0,1 6,10A2,2 0 0,1 8,12A2,2 0 0,1 6,14A2,2 0 0,1 4,12Z",fi="M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z";function Po(t){let e,r,n,a,i,l,o,s,m,u,c,g;return r=new Ce({props:{icon:ci,size:"32px"}}),{c(){e=$("div"),Y(r.$$.fragment),n=I(),a=$("div"),a.textContent="Do you want to delete this record?",i=I(),l=$("div"),o=$("button"),o.textContent="No",s=I(),m=$("button"),m.textContent="Yes",E(a,"class","col ai-center"),E(e,"class","row"),E(o,"class","btn text"),E(m,"class","btn red"),E(l,"class","ta-right")},m(f,d){z(f,e,d),U(r,e,null),k(e,n),k(e,a),z(f,i,d),z(f,l,d),k(l,o),k(l,s),k(l,m),u=!0,c||(g=[F(o,"click",re(t[0])),F(m,"click",re(t[1]))],c=!0)},p:Z,i(f){u||(T(r.$$.fragment,f),u=!0)},o(f){K(r.$$.fragment,f),u=!1},d(f){f&&N(e),W(r),f&&N(i),f&&N(l),c=!1,me(g)}}}function Ko(t){let e,r;return e=new tt({props:{title:"Delete Category",$$slots:{default:[Po]},$$scope:{ctx:t}}}),e.$on("close",t[3]),{c(){Y(e.$$.fragment)},m(n,a){U(e,n,a),r=!0},p(n,[a]){const i={};a&32&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){r||(T(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function jo(t,e,r){let{category:n={}}=e;const a=He(),i=()=>{a("close")},l=async()=>{await ee.table("categories").delete(n.id);const m=(await ee.table("bookmarks").where("category").equals(n.id).sortBy("position")).map(u=>u.id);await ee.table("bookmarks").bulkDelete(m),i()};function o(s){Ue.call(this,t,s)}return t.$$set=s=>{"category"in s&&r(2,n=s.category)},[i,l,n,o]}class Bo extends ye{constructor(e){super(),xe(this,e,jo,Ko,ve,{category:2})}}function Yn(t,e,r){const n=t.slice();return n[26]=e[r],n}function qn(t){let e=[],r=new Map,n,a,i=t[10];const l=o=>o[26].id;for(let o=0;o<i.length;o+=1){let s=Yn(t,i,o),m=l(s);r.set(m,e[o]=Xn(m,s))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=Tt()},m(o,s){for(let m=0;m<e.length;m+=1)e[m].m(o,s);z(o,n,s),a=!0},p(o,s){if(s&13599){i=o[10],fe();for(let m=0;m<e.length;m+=1)e[m].r();e=Sa(e,s,l,1,o,i,r,n.parentNode,$a,Xn,n,Yn);for(let m=0;m<e.length;m+=1)e[m].a();pe()}},i(o){if(!a){for(let s=0;s<i.length;s+=1)T(e[s]);a=!0}},o(o){for(let s=0;s<e.length;s+=1)K(e[s]);a=!1},d(o){for(let s=0;s<e.length;s+=1)e[s].d(o);o&&N(n)}}}function Xn(t,e){let r,n,a=e[26].title+"",i,l,o,s,m,u,c=Z,g,f,d;o=new Ce({props:{icon:di,size:"24px"}});function p(...v){return e[14](e[26],...v)}function x(){return e[15](e[26])}function h(...v){return e[16](e[26],...v)}function y(...v){return e[17](e[26],...v)}function b(...v){return e[18](e[26],...v)}return{key:t,first:null,c(){r=$("div"),n=$("span"),i=Ie(a),l=$("button"),Y(o.$$.fragment),s=I(),E(l,"class","menu"),E(r,"class","category"),E(r,"tabindex","0"),E(r,"draggable",m=!0),Oe(r,"selected",e[0]===e[26].id),Oe(r,"is-active",e[8]===e[26].position),this.first=r},m(v,w){z(v,r,w),k(r,n),k(n,i),k(r,l),U(o,l,null),k(r,s),g=!0,f||(d=[F(l,"click",Le(re(p))),F(r,"click",x),F(r,"dragstart",h),F(r,"drop",re(y)),F(r,"dragover",re(Mo)),F(r,"dragenter",Le(b),!0),F(r,"dragleave",e[19])],f=!0)},p(v,w){e=v,(!g||w&1024)&&a!==(a=e[26].title+"")&&Pt(i,a),w&1025&&Oe(r,"selected",e[0]===e[26].id),w&1280&&Oe(r,"is-active",e[8]===e[26].position)},r(){u=r.getBoundingClientRect()},f(){_a(r),c()},a(){c(),c=wa(r,u,Pa,{delay:0,duration:1050,easing:Ta})},i(v){g||(T(o.$$.fragment,v),g=!0)},o(v){K(o.$$.fragment,v),g=!1},d(v){v&&N(r),W(o),f=!1,me(d)}}}function Qn(t){let e,r;return e=new wo({}),e.$on("close",t[11]),{c(){Y(e.$$.fragment)},m(n,a){U(e,n,a),r=!0},p:Z,i(n){r||(T(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Io(t){let e,r,n,a,i,l,o,s,m,u,c;return n=new Ce({props:{icon:ui,size:"20px"}}),o=new Ce({props:{icon:gi,size:"20px"}}),{c(){e=$("ul"),r=$("li"),Y(n.$$.fragment),a=$("span"),a.textContent="Update",i=I(),l=$("li"),Y(o.$$.fragment),s=$("span"),s.textContent="Delete",E(a,"class","ml-2"),E(r,"tabindex","0"),E(s,"class","ml-2"),E(l,"tabindex","0")},m(g,f){z(g,e,f),k(e,r),U(n,r,null),k(r,a),k(e,i),k(e,l),U(o,l,null),k(l,s),m=!0,u||(c=[F(r,"click",t[20]),F(l,"click",t[21])],u=!0)},p:Z,i(g){m||(T(n.$$.fragment,g),T(o.$$.fragment,g),m=!0)},o(g){K(n.$$.fragment,g),K(o.$$.fragment,g),m=!1},d(g){g&&N(e),W(n),W(o),u=!1,me(c)}}}function Gn(t){let e,r;return e=new Bo({props:{category:t[4]}}),e.$on("close",t[23]),{c(){Y(e.$$.fragment)},m(n,a){U(e,n,a),r=!0},p(n,a){const i={};a&16&&(i.category=n[4]),e.$set(i)},i(n){r||(T(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Jn(t){let e,r;return e=new $o({props:{category:t[4]}}),e.$on("close",t[24]),{c(){Y(e.$$.fragment)},m(n,a){U(e,n,a),r=!0},p(n,a){const i={};a&16&&(i.category=n[4]),e.$set(i)},i(n){r||(T(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Ro(t){let e,r,n,a,i,l,o,s,m,u,c,g,f,d=t[10]&&qn(t);a=new Ce({props:{icon:fi,size:"22px",class:"mr-2"}});let p=t[5]&&Qn(t),x={$$slots:{default:[Io]},$$scope:{ctx:t}};s=new mi({props:x}),t[22](s);let h=t[6]&&Gn(t),y=t[7]&&Jn(t);return{c(){e=$("div"),d&&d.c(),r=I(),n=$("button"),Y(a.$$.fragment),i=Ie(" Add Category"),l=I(),p&&p.c(),o=I(),Y(s.$$.fragment),m=I(),h&&h.c(),u=I(),y&&y.c(),E(n,"class","category add-new"),E(e,"class","container row cols-2 cols-md-3 cols-lg-4 cols-xl-5")},m(b,v){z(b,e,v),d&&d.m(e,null),k(e,r),k(e,n),U(a,n,null),k(n,i),k(e,l),p&&p.m(e,null),k(e,o),U(s,e,null),k(e,m),h&&h.m(e,null),k(e,u),y&&y.m(e,null),t[25](e),c=!0,g||(f=F(n,"click",t[11]),g=!0)},p(b,[v]){b[10]?d?(d.p(b,v),v&1024&&T(d,1)):(d=qn(b),d.c(),T(d,1),d.m(e,r)):d&&(fe(),K(d,1,1,()=>{d=null}),pe()),b[5]?p?(p.p(b,v),v&32&&T(p,1)):(p=Qn(b),p.c(),T(p,1),p.m(e,o)):p&&(fe(),K(p,1,1,()=>{p=null}),pe());const w={};v&536871112&&(w.$$scope={dirty:v,ctx:b}),s.$set(w),b[6]?h?(h.p(b,v),v&64&&T(h,1)):(h=Gn(b),h.c(),T(h,1),h.m(e,u)):h&&(fe(),K(h,1,1,()=>{h=null}),pe()),b[7]?y?(y.p(b,v),v&128&&T(y,1)):(y=Jn(b),y.c(),T(y,1),y.m(e,null)):y&&(fe(),K(y,1,1,()=>{y=null}),pe())},i(b){c||(T(d),T(a.$$.fragment,b),T(p),T(s.$$.fragment,b),T(h),T(y),c=!0)},o(b){K(d),K(a.$$.fragment,b),K(p),K(s.$$.fragment,b),K(h),K(y),c=!1},d(b){b&&N(e),d&&d.d(),W(a),p&&p.d(),t[22](null),W(s),h&&h.d(),y&&y.d(),t[25](null),g=!1,f()}}}const Mo=()=>!0;function Oo(t,e,r){let n,a,i=Z,l=()=>(i(),i=wr(n,C=>r(10,a=C)),n);t.$$.on_destroy.push(()=>i());let o,{selectedCategory:s=0}=e,{currentDragParent:m=null}=e,u,c=0,g=!1,f=!1,d=!1;const p=()=>{r(5,g=!g)};let x=-1;const h=async(C,L)=>{if(C.currentTarget.parentElement.isSameNode(m)){C.dataTransfer.dropEffect="move";const q=parseInt(C.dataTransfer.getData("text/plain")),G=a;q<L?(G.splice(L,0,G[q]),G.splice(q,1)):(G.splice(L-1,0,G[q]),G.splice(q+1,1)),r(8,x=null);let ge=0;const ie=G.map(le=>({...le,position:++ge}));ee.table("categories").bulkPut(ie).catch(le=>console.log(le))}},y=(C,L)=>{r(1,m=o),C.dataTransfer.effectAllowed="move",C.dataTransfer.dropEffect="move";const q=L-1;C.dataTransfer.setData("text/plain",q),C.dataTransfer.setData("text/plain",q)},b=(C,L)=>{r(4,c=C),u.open(L)},v=C=>r(0,s=C.id),w=(C,L)=>y(L,C.position),_=(C,L)=>h(L,C.position),D=(C,L)=>{m.isSameNode(o)&&r(8,x=C.position)},A=C=>{C.currentTarget.contains(C.relatedTarget)||r(8,x=-1)},S=()=>{r(7,d=!0),u.close()},j=()=>{r(6,f=!0),u.close()};function B(C){we[C?"unshift":"push"](()=>{u=C,r(3,u)})}const O=()=>r(6,f=!1),H=()=>r(7,d=!1);function te(C){we[C?"unshift":"push"](()=>{o=C,r(2,o)})}return t.$$set=C=>{"selectedCategory"in C&&r(0,s=C.selectedCategory),"currentDragParent"in C&&r(1,m=C.currentDragParent)},t.$$.update=()=>{t.$$.dirty&1&&l(r(9,n=Ot(async()=>{const C=await ee.table("categories").orderBy("position").toArray();return s||r(0,s=C.length===0?0:C[0].id),C})))},[s,m,o,u,c,g,f,d,x,n,a,p,h,y,b,v,w,_,D,A,S,j,B,O,H,te]}class Fo extends ye{constructor(e){super(),xe(this,e,Oo,Ro,ve,{selectedCategory:0,currentDragParent:1})}}function Zn(t,e,r){const n=t.slice();return n[11]=e[r],n}function ea(t){let e,r=t[2],n=[];for(let a=0;a<r.length;a+=1)n[a]=ta(Zn(t,r,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Tt()},m(a,i){for(let l=0;l<n.length;l+=1)n[l].m(a,i);z(a,e,i)},p(a,i){if(i&4){r=a[2];let l;for(l=0;l<r.length;l+=1){const o=Zn(a,r,l);n[l]?n[l].p(o,i):(n[l]=ta(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}},d(a){ya(n,a),a&&N(e)}}}function ta(t){let e,r=t[11].title+"",n,a,i;return{c(){e=$("option"),n=Ie(r),a=I(),e.__value=i=t[11].id,e.value=e.__value},m(l,o){z(l,e,o),k(e,n),k(e,a)},p(l,o){o&4&&r!==(r=l[11].title+"")&&Pt(n,r),o&4&&i!==(i=l[11].id)&&(e.__value=i,e.value=e.__value)},d(l){l&&N(e)}}}function Lo(t){let e,r,n,a,i,l,o,s,m,u,c,g,f,d,p,x,h,y,b,v=t[2]&&ea(t);return{c(){e=$("form"),r=$("label"),r.textContent="Category",n=I(),a=$("select"),v&&v.c(),i=I(),l=$("label"),l.textContent="Name",o=I(),s=$("input"),m=I(),u=$("label"),u.textContent="URL",c=I(),g=$("input"),f=I(),d=$("div"),p=$("button"),p.textContent="Cancel",x=I(),h=$("button"),h.textContent="Add",E(r,"for","new-bookmark-category"),E(a,"class","input"),a.required=!0,t[0].category===void 0&&_t(()=>t[6].call(a)),E(l,"for","new-bookmark-name"),E(s,"type","text"),E(s,"id","new-bookmark-name"),E(s,"class","input"),s.required=!0,E(u,"for","new-bookmark-url"),E(g,"type","url"),E(g,"id","new-bookmark-name"),E(g,"class","input"),g.required=!0,E(p,"class","btn text"),E(p,"type","button"),E(h,"class","btn green"),E(d,"class","ta-right mt-3")},m(w,_){z(w,e,_),k(e,r),k(e,n),k(e,a),v&&v.m(a,null),mr(a,t[0].category),k(e,i),k(e,l),k(e,o),k(e,s),be(s,t[0].title),k(e,m),k(e,u),k(e,c),k(e,g),be(g,t[0].url),k(e,f),k(e,d),k(d,p),k(d,x),k(d,h),y||(b=[F(a,"change",t[6]),F(s,"input",t[7]),F(g,"input",t[8]),F(p,"click",Le(re(t[9]))),F(e,"submit",re(t[4]))],y=!0)},p(w,_){w[2]?v?v.p(w,_):(v=ea(w),v.c(),v.m(a,null)):v&&(v.d(1),v=null),_&5&&mr(a,w[0].category),_&5&&s.value!==w[0].title&&be(s,w[0].title),_&5&&be(g,w[0].url)},d(w){w&&N(e),v&&v.d(),y=!1,me(b)}}}function No(t){let e,r;return e=new tt({props:{title:"Add new bookmark",$$slots:{default:[Lo]},$$scope:{ctx:t}}}),e.$on("close",t[10]),{c(){Y(e.$$.fragment)},m(n,a){U(e,n,a),r=!0},p(n,[a]){const i={};a&16389&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){r||(T(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function zo(t,e,r){let n,a,i=Z,l=()=>(i(),i=wr(n,x=>r(2,a=x)),n);t.$$.on_destroy.push(()=>i());let{selectedCategory:o=1}=e;const s=He();let m={category:o,url:"",title:"",icon:""};const u=async()=>{const x=await ee.table("bookmarks").where("category").equals(m.category).reverse().sortBy("position"),h=x[0]?x[0].position+1:1;await ee.table("bookmarks").add({...m,position:h}),r(0,m={category:0,url:"",title:"",icon:""}),s("close")};function c(){m.category=ba(this),r(0,m)}function g(){m.title=this.value,r(0,m)}function f(){m.url=this.value,r(0,m)}const d=()=>s("close");function p(x){Ue.call(this,t,x)}return t.$$set=x=>{"selectedCategory"in x&&r(5,o=x.selectedCategory)},l(r(1,n=Ot(async()=>{const x=await ee.table("categories").toArray();return r(5,o=x.length===0?0:x[0].id),x}))),[m,n,a,s,u,o,c,g,f,d,p]}class Vo extends ye{constructor(e){super(),xe(this,e,zo,No,ve,{selectedCategory:5})}}function ra(t,e,r){const n=t.slice();return n[11]=e[r],n}function na(t){let e,r=t[2],n=[];for(let a=0;a<r.length;a+=1)n[a]=aa(ra(t,r,a));return{c(){for(let a=0;a<n.length;a+=1)n[a].c();e=Tt()},m(a,i){for(let l=0;l<n.length;l+=1)n[l].m(a,i);z(a,e,i)},p(a,i){if(i&4){r=a[2];let l;for(l=0;l<r.length;l+=1){const o=ra(a,r,l);n[l]?n[l].p(o,i):(n[l]=aa(o),n[l].c(),n[l].m(e.parentNode,e))}for(;l<n.length;l+=1)n[l].d(1);n.length=r.length}},d(a){ya(n,a),a&&N(e)}}}function aa(t){let e,r=t[11].title+"",n,a,i;return{c(){e=$("option"),n=Ie(r),a=I(),e.__value=i=t[11].id,e.value=e.__value},m(l,o){z(l,e,o),k(e,n),k(e,a)},p(l,o){o&4&&r!==(r=l[11].title+"")&&Pt(n,r),o&4&&i!==(i=l[11].id)&&(e.__value=i,e.value=e.__value)},d(l){l&&N(e)}}}function Ho(t){let e,r,n,a,i,l,o,s,m,u,c,g,f,d,p,x,h,y,b,v=t[2]&&na(t);return{c(){e=$("form"),r=$("label"),r.textContent="Category",n=I(),a=$("select"),v&&v.c(),i=I(),l=$("label"),l.textContent="Name",o=I(),s=$("input"),m=I(),u=$("label"),u.textContent="URL",c=I(),g=$("input"),f=I(),d=$("div"),p=$("button"),p.textContent="Cancel",x=I(),h=$("button"),h.textContent="Save",E(r,"for","new-bookmark-category"),E(a,"class","input"),t[0].category===void 0&&_t(()=>t[6].call(a)),E(l,"for","new-bookmark-name"),E(s,"type","text"),E(s,"id","new-bookmark-name"),E(s,"class","input"),E(u,"for","new-bookmark-url"),E(g,"type","text"),E(g,"id","new-bookmark-name"),E(g,"class","input"),E(p,"class","btn text"),E(p,"type","button"),E(h,"class","btn green"),E(d,"class","ta-right mt-3")},m(w,_){z(w,e,_),k(e,r),k(e,n),k(e,a),v&&v.m(a,null),mr(a,t[0].category),k(e,i),k(e,l),k(e,o),k(e,s),be(s,t[0].title),k(e,m),k(e,u),k(e,c),k(e,g),be(g,t[0].url),k(e,f),k(e,d),k(d,p),k(d,x),k(d,h),y||(b=[F(a,"change",t[6]),F(s,"input",t[7]),F(g,"input",t[8]),F(p,"click",Le(re(t[9]))),F(e,"submit",re(t[4]))],y=!0)},p(w,_){w[2]?v?v.p(w,_):(v=na(w),v.c(),v.m(a,null)):v&&(v.d(1),v=null),_&5&&mr(a,w[0].category),_&5&&s.value!==w[0].title&&be(s,w[0].title),_&5&&g.value!==w[0].url&&be(g,w[0].url)},d(w){w&&N(e),v&&v.d(),y=!1,me(b)}}}function Uo(t){let e,r;return e=new tt({props:{title:"Update bookmark",$$slots:{default:[Ho]},$$scope:{ctx:t}}}),e.$on("close",t[10]),{c(){Y(e.$$.fragment)},m(n,a){U(e,n,a),r=!0},p(n,[a]){const i={};a&16389&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){r||(T(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Wo(t,e,r){let n,a,i=Z,l=()=>(i(),i=wr(n,x=>r(2,a=x)),n);t.$$.on_destroy.push(()=>i());let{bookmark:o={}}=e,s={...o};const m=He(),u=async()=>{if(o.category!=s.category){const x=await ee.table("bookmarks").toArray();r(0,s.position=x.length,s)}await ee.table("bookmarks").put(s),m("close")};function c(){s.category=ba(this),r(0,s)}function g(){s.title=this.value,r(0,s)}function f(){s.url=this.value,r(0,s)}const d=()=>m("close");function p(x){Ue.call(this,t,x)}return t.$$set=x=>{"bookmark"in x&&r(5,o=x.bookmark)},l(r(1,n=Ot(async()=>await ee.table("categories").toArray()))),[s,n,a,m,u,o,c,g,f,d,p]}class Yo extends ye{constructor(e){super(),xe(this,e,Wo,Uo,ve,{bookmark:5})}}function qo(t){let e,r,n,a,i,l,o,s,m,u,c,g;return r=new Ce({props:{icon:ci,size:"32px"}}),{c(){e=$("div"),Y(r.$$.fragment),n=I(),a=$("div"),a.textContent="Do you want to delete this record?",i=I(),l=$("div"),o=$("button"),o.textContent="No",s=I(),m=$("button"),m.textContent="Yes",E(a,"class","col ai-center"),E(e,"class","row"),E(o,"class","btn text"),E(m,"class","btn red"),E(l,"class","ta-right")},m(f,d){z(f,e,d),U(r,e,null),k(e,n),k(e,a),z(f,i,d),z(f,l,d),k(l,o),k(l,s),k(l,m),u=!0,c||(g=[F(o,"click",re(t[0])),F(m,"click",re(t[1]))],c=!0)},p:Z,i(f){u||(T(r.$$.fragment,f),u=!0)},o(f){K(r.$$.fragment,f),u=!1},d(f){f&&N(e),W(r),f&&N(i),f&&N(l),c=!1,me(g)}}}function Xo(t){let e,r;return e=new tt({props:{title:"Delete Bookmark",$$slots:{default:[qo]},$$scope:{ctx:t}}}),e.$on("close",t[3]),{c(){Y(e.$$.fragment)},m(n,a){U(e,n,a),r=!0},p(n,[a]){const i={};a&32&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){r||(T(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function Qo(t,e,r){let{bookmark:n={}}=e;const a=He(),i=()=>{a("close")},l=async()=>{await ee.table("bookmarks").delete(n.id),i()};function o(s){Ue.call(this,t,s)}return t.$$set=s=>{"bookmark"in s&&r(2,n=s.bookmark)},[i,l,n,o]}class Go extends ye{constructor(e){super(),xe(this,e,Qo,Xo,ve,{bookmark:2})}}function ia(t,e,r){const n=t.slice();return n[26]=e[r],n}function la(t){let e=[],r=new Map,n,a,i=t[10];const l=o=>o[26].id;for(let o=0;o<i.length;o+=1){let s=ia(t,i,o),m=l(s);r.set(m,e[o]=oa(m,s))}return{c(){for(let o=0;o<e.length;o+=1)e[o].c();n=Tt()},m(o,s){for(let m=0;m<e.length;m+=1)e[m].m(o,s);z(o,n,s),a=!0},p(o,s){if(s&13597){i=o[10],fe();for(let m=0;m<e.length;m+=1)e[m].r();e=Sa(e,s,l,1,o,i,r,n.parentNode,$a,oa,n,ia);for(let m=0;m<e.length;m+=1)e[m].a();pe()}},i(o){if(!a){for(let s=0;s<i.length;s+=1)T(e[s]);a=!0}},o(o){for(let s=0;s<e.length;s+=1)K(e[s]);a=!1},d(o){for(let s=0;s<e.length;s+=1)e[s].d(o);o&&N(n)}}}function Jo(t){let e,r;return{c(){e=$("img"),E(e,"draggable","false"),nr(e.src,r=`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${t[26].url}&size=16`)||E(e,"src",r),E(e,"alt","")},m(n,a){z(n,e,a)},p(n,a){a&1024&&!nr(e.src,r=`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${n[26].url}&size=16`)&&E(e,"src",r)},d(n){n&&N(e)}}}function Zo(t){let e,r;return{c(){e=$("img"),nr(e.src,r=t[26].icon)||E(e,"src",r),E(e,"alt",""),E(e,"draggable","false")},m(n,a){z(n,e,a)},p(n,a){a&1024&&!nr(e.src,r=n[26].icon)&&E(e,"src",r)},d(n){n&&N(e)}}}function oa(t,e){let r,n,a,i,l,o=e[26].title+"",s,m,u,c,g,f,d,p,x=Z,h,y,b;function v(B,O){return B[26].icon?Zo:Jo}let w=v(e),_=w(e);g=new Ce({props:{icon:di,size:"24px"}});function D(...B){return e[15](e[26],...B)}function A(...B){return e[16](e[26],...B)}function S(...B){return e[17](e[26],...B)}function j(...B){return e[18](e[26],...B)}return{key:t,first:null,c(){r=$("div"),n=$("a"),a=$("div"),_.c(),i=I(),l=$("span"),s=Ie(o),u=I(),c=$("button"),Y(g.$$.fragment),f=I(),E(a,"class","favicon"),E(a,"draggable","false"),E(l,"class","ml-2"),E(n,"href",m=e[26].url),E(n,"draggable","false"),E(c,"class","menu"),E(r,"class","bookmark"),E(r,"draggable",d=!0),Oe(r,"is-active",e[8]===e[26].position),this.first=r},m(B,O){z(B,r,O),k(r,n),k(n,a),_.m(a,null),k(n,i),k(n,l),k(l,s),k(r,u),k(r,c),U(g,c,null),k(r,f),h=!0,y||(b=[F(c,"click",Le(re(D))),F(r,"dragstart",A),F(r,"drop",re(S)),F(r,"dragover",re(e[14])),F(r,"dragenter",Le(j),!0),F(r,"dragleave",e[19])],y=!0)},p(B,O){e=B,w===(w=v(e))&&_?_.p(e,O):(_.d(1),_=w(e),_&&(_.c(),_.m(a,null))),(!h||O&1024)&&o!==(o=e[26].title+"")&&Pt(s,o),(!h||O&1024&&m!==(m=e[26].url))&&E(n,"href",m),O&1280&&Oe(r,"is-active",e[8]===e[26].position)},r(){p=r.getBoundingClientRect()},f(){_a(r),x()},a(){x(),x=wa(r,p,Pa,{delay:0,duration:1050,easing:Ta})},i(B){h||(T(g.$$.fragment,B),h=!0)},o(B){K(g.$$.fragment,B),h=!1},d(B){B&&N(r),_.d(),W(g),y=!1,me(b)}}}function sa(t){let e,r;return e=new Vo({props:{selectedCategory:t[1]}}),e.$on("close",t[11]),{c(){Y(e.$$.fragment)},m(n,a){U(e,n,a),r=!0},p(n,a){const i={};a&2&&(i.selectedCategory=n[1]),e.$set(i)},i(n){r||(T(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function es(t){let e,r,n,a,i,l,o,s,m,u,c;return n=new Ce({props:{icon:ui,size:"20px"}}),o=new Ce({props:{icon:gi,size:"20px"}}),{c(){e=$("ul"),r=$("li"),Y(n.$$.fragment),a=$("span"),a.textContent="Update",i=I(),l=$("li"),Y(o.$$.fragment),s=$("span"),s.textContent="Delete",E(a,"class","ml-2"),E(r,"tabindex","0"),E(s,"class","ml-2"),E(l,"tabindex","0")},m(g,f){z(g,e,f),k(e,r),U(n,r,null),k(r,a),k(e,i),k(e,l),U(o,l,null),k(l,s),m=!0,u||(c=[F(r,"click",t[20]),F(l,"click",t[21])],u=!0)},p:Z,i(g){m||(T(n.$$.fragment,g),T(o.$$.fragment,g),m=!0)},o(g){K(n.$$.fragment,g),K(o.$$.fragment,g),m=!1},d(g){g&&N(e),W(n),W(o),u=!1,me(c)}}}function ma(t){let e,r;return e=new Go({props:{bookmark:t[2]}}),e.$on("close",t[23]),{c(){Y(e.$$.fragment)},m(n,a){U(e,n,a),r=!0},p(n,a){const i={};a&4&&(i.bookmark=n[2]),e.$set(i)},i(n){r||(T(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function ca(t){let e,r;return e=new Yo({props:{bookmark:t[2]}}),e.$on("close",t[24]),{c(){Y(e.$$.fragment)},m(n,a){U(e,n,a),r=!0},p(n,a){const i={};a&4&&(i.bookmark=n[2]),e.$set(i)},i(n){r||(T(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function ts(t){let e,r,n,a,i,l,o,s,m,u,c,g,f,d=t[10]&&la(t);a=new Ce({props:{icon:fi,size:"22px"}});let p=t[5]&&sa(t),x={$$slots:{default:[es]},$$scope:{ctx:t}};s=new mi({props:x}),t[22](s);let h=t[6]&&ma(t),y=t[7]&&ca(t);return{c(){e=$("div"),d&&d.c(),r=I(),n=$("button"),Y(a.$$.fragment),i=Ie("Add Bookmark"),l=I(),p&&p.c(),o=I(),Y(s.$$.fragment),m=I(),h&&h.c(),u=I(),y&&y.c(),E(n,"class","bookmark add-new"),dt(n,"gap","0",!1),E(e,"class","container row cols-2 cols-md-3 cols-lg-4 cols-xl-5")},m(b,v){z(b,e,v),d&&d.m(e,null),k(e,r),k(e,n),U(a,n,null),k(n,i),k(e,l),p&&p.m(e,null),k(e,o),U(s,e,null),k(e,m),h&&h.m(e,null),k(e,u),y&&y.m(e,null),t[25](e),c=!0,g||(f=F(n,"click",t[11]),g=!0)},p(b,[v]){b[10]?d?(d.p(b,v),v&1024&&T(d,1)):(d=la(b),d.c(),T(d,1),d.m(e,r)):d&&(fe(),K(d,1,1,()=>{d=null}),pe()),b[5]?p?(p.p(b,v),v&32&&T(p,1)):(p=sa(b),p.c(),T(p,1),p.m(e,o)):p&&(fe(),K(p,1,1,()=>{p=null}),pe());const w={};v&536871112&&(w.$$scope={dirty:v,ctx:b}),s.$set(w),b[6]?h?(h.p(b,v),v&64&&T(h,1)):(h=ma(b),h.c(),T(h,1),h.m(e,u)):h&&(fe(),K(h,1,1,()=>{h=null}),pe()),b[7]?y?(y.p(b,v),v&128&&T(y,1)):(y=ca(b),y.c(),T(y,1),y.m(e,null)):y&&(fe(),K(y,1,1,()=>{y=null}),pe())},i(b){c||(T(d),T(a.$$.fragment,b),T(p),T(s.$$.fragment,b),T(h),T(y),c=!0)},o(b){K(d),K(a.$$.fragment,b),K(p),K(s.$$.fragment,b),K(h),K(y),c=!1},d(b){b&&N(e),d&&d.d(),W(a),p&&p.d(),t[22](null),W(s),h&&h.d(),y&&y.d(),t[25](null),g=!1,f()}}}function rs(t,e,r){let n,a,i=Z,l=()=>(i(),i=wr(n,C=>r(10,a=C)),n);t.$$.on_destroy.push(()=>i());let{selectedCategory:o=0}=e,{currentDragParent:s=null}=e,m={},u,c,g=!1,f=!1,d=!1;const p=()=>{r(5,g=!g)};let x=-1;const h=async(C,L)=>{if(C.currentTarget.parentElement.isSameNode(s)){C.dataTransfer.effectAllowed="move",C.dataTransfer.dropEffect="move";const q=parseInt(C.dataTransfer.getData("text/plain")),G=a;q<L?(G.splice(L,0,G[q]),G.splice(q,1)):(G.splice(L-1,0,G[q]),G.splice(q+1,1)),r(8,x=null);let ge=0;const ie=G.map(le=>({...le,position:++ge}));ee.table("bookmarks").bulkPut(ie).catch(le=>console.log(le))}},y=(C,L)=>{r(0,s=c),C.dataTransfer.effectAllowed="move",C.dataTransfer.dropEffect="move";const q=L-1;C.dataTransfer.setData("text/plain",q)};function b(C){Ue.call(this,t,C)}const v=(C,L)=>{r(2,m=C),u.open(L)},w=(C,L)=>y(L,C.position),_=(C,L)=>h(L,C.position),D=(C,L)=>{s.isSameNode(c)&&r(8,x=C.position)},A=C=>{C.currentTarget.contains(C.relatedTarget)||r(8,x=-1)},S=()=>{r(7,d=!0),u.close()},j=()=>{r(6,f=!0),u.close()};function B(C){we[C?"unshift":"push"](()=>{u=C,r(3,u)})}const O=()=>r(6,f=!1),H=()=>r(7,d=!1);function te(C){we[C?"unshift":"push"](()=>{c=C,r(4,c)})}return t.$$set=C=>{"selectedCategory"in C&&r(1,o=C.selectedCategory),"currentDragParent"in C&&r(0,s=C.currentDragParent)},t.$$.update=()=>{t.$$.dirty&2&&l(r(9,n=Ot(async()=>await ee.table("bookmarks").where("category").equals(o).sortBy("position"))))},[s,o,m,u,c,g,f,d,x,n,a,p,h,y,b,v,w,_,D,A,S,j,B,O,H,te]}class ns extends ye{constructor(e){super(),xe(this,e,rs,ts,ve,{selectedCategory:1,currentDragParent:0})}}function as(t){let e,r,n,a,i,l,o,s,m,u;return{c(){e=$("label"),r=$("input"),n=I(),a=$("span"),i=I(),l=$("h4"),l.textContent="Or",o=I(),s=$("button"),s.textContent="Download backup file",E(r,"type","file"),E(r,"id","file"),E(r,"aria-label","File browser example"),E(a,"class","file-custom"),E(e,"class","file"),E(l,"class","ta-center my-3"),E(s,"class","btn-export")},m(c,g){z(c,e,g),k(e,r),k(e,n),k(e,a),z(c,i,g),z(c,l,g),z(c,o,g),z(c,s,g),m||(u=[F(r,"change",t[1]),F(s,"click",re(t[0]))],m=!0)},p:Z,d(c){c&&N(e),c&&N(i),c&&N(l),c&&N(o),c&&N(s),m=!1,me(u)}}}function is(t){let e,r;return e=new tt({props:{title:"Manage Bookmarks",$$slots:{default:[as]},$$scope:{ctx:t}}}),e.$on("close",t[2]),{c(){Y(e.$$.fragment)},m(n,a){U(e,n,a),r=!0},p(n,[a]){const i={};a&32&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){r||(T(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function ls(t){const e=He(),r=async()=>{const l=await ee.table("categories").toArray(),o=await ee.table("bookmarks").toArray(),s={categories:l,bookmarks:o},m=JSON.stringify(s);let u=document.createElement("a");u.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(m)),u.setAttribute("download","AyoBookmarksBackup.json"),u.style.display="none",document.body.appendChild(u),u.click(),document.body.removeChild(u),e("close")},n=l=>{var o=new FileReader;o.onload=a,o.readAsText(l.target.files[0])},a=async l=>{const o=JSON.parse(l.target.result);await ee.table("categories").bulkPut(o.categories),await ee.table("bookmarks").bulkPut(o.bookmarks),e("close")};function i(l){Ue.call(this,t,l)}return[r,n,i]}class os extends ye{constructor(e){super(),xe(this,e,ls,is,ve,{})}}function ua(t){let e,r;return e=new os({}),e.$on("close",t[3]),{c(){Y(e.$$.fragment)},m(n,a){U(e,n,a),r=!0},p:Z,i(n){r||(T(e.$$.fragment,n),r=!0)},o(n){K(e.$$.fragment,n),r=!1},d(n){W(e,n)}}}function ss(t){let e,r,n,a,i,l,o,s,m,u,c,g,f,d,p,x,h;function y(S){t[4](S)}function b(S){t[5](S)}let v={};t[0]!==void 0&&(v.selectedCategory=t[0]),t[1]!==void 0&&(v.currentDragParent=t[1]),r=new Fo({props:v}),we.push(()=>Vt(r,"selectedCategory",y)),we.push(()=>Vt(r,"currentDragParent",b));function w(S){t[6](S)}function _(S){t[7](S)}let D={};t[0]!==void 0&&(D.selectedCategory=t[0]),t[1]!==void 0&&(D.currentDragParent=t[1]),s=new ns({props:D}),we.push(()=>Vt(s,"selectedCategory",w)),we.push(()=>Vt(s,"currentDragParent",_)),f=new Ce({props:{icon:To,size:"2rem"}});let A=t[2]&&ua(t);return{c(){e=$("main"),Y(r.$$.fragment),i=I(),l=$("div"),o=I(),Y(s.$$.fragment),c=I(),g=$("button"),Y(f.$$.fragment),d=I(),A&&A.c(),E(l,"class","mt-6"),E(g,"class","menu-btn"),E(e,"class","container")},m(S,j){z(S,e,j),U(r,e,null),k(e,i),k(e,l),k(e,o),U(s,e,null),k(e,c),k(e,g),U(f,g,null),k(e,d),A&&A.m(e,null),p=!0,x||(h=F(g,"click",re(t[3])),x=!0)},p(S,[j]){const B={};!n&&j&1&&(n=!0,B.selectedCategory=S[0],Nt(()=>n=!1)),!a&&j&2&&(a=!0,B.currentDragParent=S[1],Nt(()=>a=!1)),r.$set(B);const O={};!m&&j&1&&(m=!0,O.selectedCategory=S[0],Nt(()=>m=!1)),!u&&j&2&&(u=!0,O.currentDragParent=S[1],Nt(()=>u=!1)),s.$set(O),S[2]?A?(A.p(S,j),j&4&&T(A,1)):(A=ua(S),A.c(),T(A,1),A.m(e,null)):A&&(fe(),K(A,1,1,()=>{A=null}),pe())},i(S){p||(T(r.$$.fragment,S),T(s.$$.fragment,S),T(f.$$.fragment,S),T(A),p=!0)},o(S){K(r.$$.fragment,S),K(s.$$.fragment,S),K(f.$$.fragment,S),K(A),p=!1},d(S){S&&N(e),W(r),W(s),W(f),A&&A.d(),x=!1,h()}}}function ms(t,e,r){let n=0,a=null,i=!1;const l=()=>{r(2,i=!i)};function o(c){n=c,r(0,n)}function s(c){a=c,r(1,a)}function m(c){n=c,r(0,n)}function u(c){a=c,r(1,a)}return[n,a,i,l,o,s,m,u]}class cs extends ye{constructor(e){super(),xe(this,e,ms,ss,ve,{})}}new cs({target:document.getElementById("app")});
